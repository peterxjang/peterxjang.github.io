<!doctype html><html lang="en"><meta charset="UTF-8"><meta name="viewport"content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>Peter Jang</title><style>*,:after,:before{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0}@keyframes typing{from{width:0}}@keyframes typing2{0%{width:0}50%{width:0}100%{width:100}}#title{position:fixed;left:0;top:0;width:100%;height:100%;font:1em Consolas,Monaco,monospace;color:#ccc;margin:2em 1em;z-index:-1}#title h1{width:10ch;white-space:nowrap;overflow:hidden;animation:typing 1s steps(10,end);transition:color 1s ease}#title p{width:18ch;white-space:nowrap;overflow:hidden;animation:typing2 4s steps(18,end);transition:opacity 1s ease}body,html{height:100%;width:100%;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif}body{overflow-x:hidden}canvas{height:100%;display:block}.modal{position:fixed;left:0;top:0;width:100%;height:100%;background:#000;color:#fff;padding:1em;z-index:3;opacity:.9;transition:opacity .2s}.modal p{margin-bottom:1em}.modal a{color:#fff}.modal-close{color:#fff;float:right;margin-bottom:1em}#modal-info{opacity:0;padding-top:0;padding-bottom:0;pointer-events:none;background-color:#222}#modal-info>div{margin:0 auto;max-width:960px;height:100%;overflow:hidden}#modal-info>div>div{padding:1em;overflow-y:auto;height:100%;margin-right:-200em;padding-right:201em;background-color:#000}#modal-info a{pointer-events:auto}#modal-info .caption:hover{cursor:pointer}#modal-info .caption{margin-bottom:.2em}#modal-info .toolbar{float:right}.modal form{width:50%;margin-left:25%;margin-bottom:1em;padding:1em;font-size:14px}.modal form button,.modal form input,.modal form textarea{display:block;height:4em;width:100%;margin-bottom:1em;padding:1em}.modal form textarea{height:20em}.hidden{display:none}a{color:#ccc;font-size:0.8em;}</style><body style="background-color:#111"><div id="app"></div><canvas id="canvas"></canvas><div id="title"><h1>Peter Jang</h1><p>(zoom to navigate)</div><div style="position: fixed; top: 0;  margin: 0.5em 1em"><a href="/blog">blog</a> <a target="_blank" rel="noopener noreferrer me" href="https://twitter.com/peterxjang">twitter</a> <a target="_blank" rel="noopener noreferrer me" href="https://linkedin.com/in/peterxjang">linkedin</a></div></div><div id="modal-info"class="modal"style="opacity:0"><div class="hidden-scrollbar"><div class="inner"><div class="toolbar"><a id="modal-info-edit"href="javascript:void(0)"class="hidden">Edit</a> <a id="modal-info-delete"href="javascript:void(0)"class="hidden">Delete</a> <a id="modal-info-close"href="javascript:void(0)">Close</a></div><h1 class="caption"title="Toggle solid text"></h1><div class="body"></div></div></div></div><div id="modal-menu"class="modal modal-form hidden"><a id="modal-menu-close"class="modal-close"href="javascript:void(0)">Close</a><form><button id="modal-menu-save">Save Layout</button> <button id="modal-menu-reset">Reset Layout</button><br><button id="modal-menu-new">New Record</button></form></div><div id="modal-new"class="modal modal-form hidden"><a id="modal-new-close"class="modal-close"href="javascript:void(0)">Close</a><form><div><input id="modal-new-image"placeholder="Image"aria-label="Image"></div><div><input id="modal-new-caption"placeholder="Caption"aria-label="Caption"></div><div><textarea id="modal-new-body"placeholder="Body"aria-label="Body"></textarea></div><button id="modal-new-save">Create</button> <button id="modal-new-cancel">Cancel</button></form></div><div id="modal-edit"class="modal modal-form hidden"><a id="modal-edit-close"class="modal-close"href="javascript:void(0)">Close</a><form><div><input id="modal-edit-caption"placeholder="Caption"aria-label="Caption"></div><div><textarea id="modal-edit-body"placeholder="Body"aria-label="Body"></textarea></div><button id="modal-edit-save">Update</button> <button id="modal-edit-cancel">Cancel</button></form></div><script>!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){"use strict";(function(e,i){var o,a=n(1);o="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:i;var r=Object(a.a)(o);t.a=r}).call(this,n(2),n(3)(e))},function(e,t,n){"use strict";function i(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",function(){return i})},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){"use strict";n.r(t);var i=n(0),o={INIT:"@@redux/INIT"+Math.random().toString(36).substring(7).split("").join("."),REPLACE:"@@redux/REPLACE"+Math.random().toString(36).substring(7).split("").join(".")},a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.assign;function r(e){if("object"!==(void 0===e?"undefined":a(e))||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function c(e,t,n){var l;if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(c)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var s=e,d=t,u=[],h=u,f=!1;function p(){h===u&&(h=u.slice())}function g(){if(f)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return d}function y(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(f)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var t=!0;return p(),h.push(e),function(){if(t){if(f)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");t=!1,p();var n=h.indexOf(e);h.splice(n,1)}}}function m(e){if(!r(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(f)throw new Error("Reducers may not dispatch actions.");try{f=!0,d=s(d,e)}finally{f=!1}for(var t=u=h,n=0;n<t.length;n++){(0,t[n])()}return e}return m({type:o.INIT}),(l={dispatch:m,subscribe:y,getState:g,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");s=e,m({type:o.REPLACE})}})[i.a]=function(){var e,t=y;return(e={subscribe:function(e){if("object"!==(void 0===e?"undefined":a(e))||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(g())}return n(),{unsubscribe:t(n)}}})[i.a]=function(){return this},e},l}function l(e,t){var n=t&&t.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}var s="ADD_ITEM",d="REMOVE_ITEM",u="SELECT_ITEM",h="TRANSLATE_ITEM",f="TRANSLATE_ITEM_GROUP",p="SCALE_ITEM",g="TRANSFORM_ITEM",y="TRANSFORM_ITEM_GROUP",m="TRANSLATE_CANVAS",v="SCALE_CANVAS",b="UPDATE_ITEM_CHARACTERISTICS",w="LOAD_ITEMS",x="CHANGE_ROUTE",S="REFRESH_CANVAS";function M(e,t){return{type:u,id:e,pinBack:t}}function I(e,t){return{type:b,id:e,options:t}}function E(e,t,n){return{type:v,scale:e,x:t,y:n}}function T(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){R(e,t,n[t])})}return e}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $={canvas:{x:0,y:0,scale:1,src:"root.jpg"},items:[],selectedItem:-1,loadingItems:!0};var k=function(e){for(var t=Object.keys(e),n={},i=0;i<t.length;i++){var a=t[i];"function"==typeof e[a]&&(n[a]=e[a])}var r=Object.keys(n),c=void 0;try{!function(e){Object.keys(e).forEach(function(t){var n=e[t];if(void 0===n(void 0,{type:o.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+o.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}(n)}catch(e){c=e}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(c)throw c;for(var i=!1,o={},a=0;a<r.length;a++){var s=r[a],d=n[s],u=e[s],h=d(u,t);if(void 0===h){var f=l(s,t);throw new Error(f)}o[s]=h,i=i||h!==u}return i?o:e}}({canvas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$.canvas,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return O({},e,{x:e.x+t.x*e.scale,y:e.y+t.y*e.scale});case v:return O({},e,{x:t.x,y:t.y,scale:t.scale});default:return e}},selectedItem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$.selectedItem,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return t.id;default:return e}},loadingItems:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$.loadingItems;return arguments.length>1&&arguments[1],e},items:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$.items,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:return T(e).concat([t.item]);case d:return e.filter(function(e){return e.id!==t.item.id});case h:return e.map(function(e){return e.id===t.id?O({},e,{x:t.x,y:t.y}):e});case f:return e.map(function(e){for(var n=0;n<t.transforms.length;n++)if(e.id===t.transforms[n].id)return O({},e,{x:t.transforms[n].x,y:t.transforms[n].y});return e});case p:return e.map(function(e){return e.id===t.id?O({},e,{scale:t.scale}):e});case g:return e.map(function(e){return e.id===t.id?O({},e,{x:t.x,y:t.y,scale:t.scale,angle:t.angle}):e});case y:return e.map(function(e){for(var n=0;n<t.transforms.length;n++)if(e.id===t.transforms[n].id)return O({},e,{x:t.transforms[n].x,y:t.transforms[n].y,scale:t.transforms[n].scale,angle:t.transforms[n].angle});return e});case b:return e.map(function(e){return e.id===t.id?O({},e,t.options):e});case u:var n=e.filter(function(e){return e.id!==t.id}),i=e.filter(function(e){return e.id===t.id});return t.pinBack?i.concat(n):n.concat(i);default:return e}},parent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return arguments.length>1&&arguments[1],e}}),j=function(e,t){return t.type===x?e={canvas:t.state.canvas,items:t.state.items,parent:t.state.parent}:t.type===w&&(e=O({},e,{items:t.items,loadingItems:!1})),k(e,t)},A={init:function(e){this.ctx=e},render:function(e){var t=e.x,n=e.y,i=e.fullWidth,o=e.fullHeight,a=e.scale,r=e.canvasScale;this.draw(this.ctx.strokeRect,t-i/2,n-o/2,i,o,a,r)},draw:function(e,t,n,i,o,a,r){var c=50/a/r;this.ctx.strokeStyle="#00f",this.ctx.lineWidth=5/a/r,e.call(this.ctx,t-c/2+i,n-c/2+o,c,c),this.ctx.lineWidth=1}};function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P,C,B,L,H,N,q,z,_,W,F,Y,V,X,U,G,J,K,Q={},Z=!1,ee=[],te={init:function(e){this.ctx=e,A.init(e)},clearImageCache:function(){Q={}},render:function(e){var t=this.computeBorderSize(e),n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){D(e,t,n[t])})}return e}({},e,{borderSize:t.borderSize,fullWidth:t.fullWidth,fullHeight:t.fullHeight});this.ctx.save(),this.transformToItem(n),this.renderBase(n),this.renderText(n);var i=this.renderImageAnimate(n);return e.selected&&A.render(n),this.ctx.restore(),i},renderBase:function(e){var t=e.x,n=e.y,i=e.width,o=e.height,a=e.borderSize,r=e.fullWidth,c=e.fullHeight,l=e.color,s=e.selected;if(r&&c){this.ctx.strokeStyle=s?"#aaf":"#ddd",this.ctx.fillStyle=s?"#ccf":"#fff";var d=t-r/2,u=n-c/2;this.draw(this.ctx.fillRect,d,u,r,c),this.draw(this.ctx.strokeRect,d,u,r,c),this.ctx.fillStyle=l||"#000",this.draw(this.ctx.fillRect,d+a,u+a,i,o)}},renderText:function(e){var t=e.x,n=e.y,i=e.width,o=e.height,a=e.fullHeight,r=e.caption,c=e.border,l=e.borderSize;if(c){var s=a-o-l,d=.5*s;this.ctx.fillStyle="#333",this.ctx.font="".concat(d,"px American Typewriter, Courier New, sans-serif"),this.ctx.textAlign="center",this.ctx.textBaseline="bottom",this.ctx.fillText(r,t,n+.5*a-.4*(s-d),i)}},loadImage:function(e){var t=this;if(!Q[e.id])if(Z)ee.push(this.loadImage.bind(this,e));else{Z=!0;var n=new Image;n.crossOrigin="anonymous",n.addEventListener("load",function(){Z=!1;var i=e.color||t.getDominantColor(n),o=void 0===e.scale?1:e.scale;e.onUpdateItemProps(e.id,{width:n.width,height:n.height,color:i,scale:o}),n.alpha=0,ee.length>0&&ee.pop().call()},!1),n.src=this.getFullSrc(e.src,e.id),Q[e.id]=n}},getFullSrc:function(e,t){var n=e?"/images/".concat(e):"/images/".concat(t,".jpg");return e&&e.startsWith("http")&&(n=e),n},renderImageAnimate:function(e){var t,n=Q[e.id];if(n)return t=this.renderImage(n,e),n.alpha<1&&(n.alpha+=.01),t},renderImage:function(e,t){if(e.width&&e.height){var n=this.getVisibleOpacity(e.width,t.scale,t.canvasScale),i=e.alpha||0;if(n>0){this.ctx.globalAlpha=Math.min(i,n);var o=t.x-t.width/2,a=t.y-t.height/2-6*t.borderSize/2;this.ctx.drawImage(e,o,a),this.ctx.globalAlpha=1}return i}},computeBorderSize:function(e){var t=e.width,n=e.height,i=e.border?.025*Math.min(t,n):0;return{borderSize:i,fullWidth:t+2*i,fullHeight:n+8*i}},getTransformedDimensions:function(e){var t=this.computeBorderSize(e),n=t.fullWidth,i=t.fullHeight,o=n*e.scale,a=i*e.scale;return{x:e.x-n/2-(o-n)/2,y:e.y-i/2-(a-i)/2,width:o,height:a}},getVisibleOpacity:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50,o=(e*t*n-i)/(.5*i);return Math.max(0,Math.min(o,1))},isPointInRecord:function(e){var t=e.x,n=e.y,i=e.height,o=e.width,a=e.scale,r=e.angle,c=e.inputX,l=e.inputY,s=e.border,d=e.canvasScale,u=e.skipCheckHandle,h=this.computeBorderSize({width:o,height:i,border:s}),f=h.fullWidth,p=h.fullHeight;this.ctx.save(),this.transformToItem({x:t,y:n,fullWidth:f,fullHeight:p,scale:a,angle:r}),this.ctx.beginPath();var g,y=t-f/2,m=n-p/2;return A.draw(this.ctx.rect,y,m,f,p,a,d),!u&&this.ctx.isPointInPath(c,l)?g="handle":(this.ctx.beginPath(),this.draw(this.ctx.rect,y,m,f,p),g=!!this.ctx.isPointInPath(c,l)&&"record"),this.ctx.restore(),g},computeTransformedDimensions:function(e,t){var n=this.computeBorderSize(e),i=n.fullWidth,o=n.fullHeight,a=e.x-.5*i*e.scale+t.x/t.scale,r=e.y-.5*o*e.scale+t.y/t.scale;return{xMin:a,yMin:r,xMax:a+i*e.scale,yMax:r+o*e.scale}},isRecordEnclosed:function(e,t,n,i,o,a){var r=this.computeTransformedDimensions(e,t),c=r.xMin,l=r.yMin,s=r.xMax,d=r.yMax;return c<n&&s>n+o&&l<i&&d>i+a},isRecordInViewport:function(e,t,n,i,o,a){var r=this.computeTransformedDimensions(e,t),c=r.xMin,l=r.yMin,s=r.xMax,d=r.yMax,u=(s>n&&s<n+o||c>n&&c<n+o)&&(d>i&&d<i+a||l>i&&l<i+a),h=this.isRecordEnclosed(e,t,n,i,o,a);return u||h},draw:function(e,t,n,i,o){e.call(this.ctx,t,n,i,o)},transformToItem:function(e){var t=e.x,n=e.y,i=e.scale,o=e.angle;this.ctx.translate(t,n),this.ctx.rotate(o),this.ctx.scale(i,i),this.ctx.translate(-t,-n)},getDominantColor:function(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");if(!n)return"#000";n.drawImage(e,0,0,e.width,e.height);for(var i=n.getImageData(0,0,e.width,e.height),o=-4,a=0,r=0,c=0,l=0,s=i.data.length;(o+=20)<s;)++a,r+=i.data[o],c+=i.data[o+1],l+=i.data[o+2];return r=~~(r/a),c=~~(c/a),l=~~(l/a),t=n=i=null,this.rgbToHex(r,c,l)},rgbToHex:function(e,t,n){return"#"+(n|t<<8|e<<16).toString(16)}};function ne(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){oe(e,t,n[t])})}return e}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ae,re,ce,le=null;function se(){B=C.getState(),H.setTransform(1,0,0,1,0,0),H.clearRect(0,0,L.width,L.height),H.setTransform(B.canvas.scale,0,0,B.canvas.scale,B.canvas.x,B.canvas.y);var e=!1;B.items.forEach(function(t){te.render(fe(t))<1&&(e=!0)}),!e||re||ce||de({type:S})}function de(e){window.requestAnimationFrame(function(){C.dispatch(e)})}function ue(){B.items.forEach(function(e){var t=te.getVisibleOpacity(e.width,e.scale,B.canvas.scale),n=te.isRecordInViewport(e,B.canvas,0,0,L.width/B.canvas.scale,L.height/B.canvas.scale);t>.9&&n&&te.loadImage(fe(e))})}function he(e){var t=B.items.reduce(function(e,t){return e+t.width*t.scale*B.canvas.scale},0);if(e<0&&t<10)return P.onTransition(-1,B.parent);if(e>0)for(var n,i=0;i<B.items.length;i++)if(!(n=B.items[i]).pinBack&&te.isRecordEnclosed(n,B.canvas,0,0,L.width/B.canvas.scale,L.height/B.canvas.scale))return P.onTransition(1,n);return P.onHideModalInfo(),!1}function fe(e){return ie({},e,{canvasScale:B.canvas.scale,selected:e.id===B.selectedItem,onGetItemProps:pe,onUpdateItemProps:ge})}function pe(e){return fe(B.items.filter(function(t){return t.id===e})[0])}function ge(e,t){de(I(e,t))}function ye(){L.width=window.innerWidth,L.height=window.innerHeight,1!==window.devicePixelRatio&&(L.width=L.width*window.devicePixelRatio,L.height=L.height*window.devicePixelRatio,B||(B=C.getState()),H.scale(B.canvas.scale*window.devicePixelRatio,B.canvas.scale*window.devicePixelRatio)),se()}function me(){var e=te.computeTransformedDimensions(V,B.canvas),t=e.xMin,n=e.yMin,i=e.xMax,o=e.yMax;U=V.pinBack?B.items.filter(function(e){return e.id!==V.id&&!e.pinBack&&te.isRecordInViewport(e,B.canvas,t,n,i-t,o-n)}):null}function ve(e,t,n){V=n,me(),N=e,q=t,L.style.cursor="pointer",de(M(V.id,V.pinBack))}function be(e,t){U?de(function(e){return{type:f,transforms:e}}(ne(U).concat([V]).map(function(n){return{id:n.id,x:n.x+e,y:n.y+t}}))):de(function(e,t,n){return{type:h,id:e,x:t,y:n}}(V.id,V.x+e,V.y+t))}function we(e,t,n){V=n,me(),N=e,q=t,L.style.cursor="crosshair"}function xe(e,t,n,i){t?de(function(e){return{type:y,transforms:e}}(ne(t).concat([e]).map(function(t){var o=t.x-e.x,a=t.y-e.y,r=Math.sqrt(Math.pow(o,2)+Math.pow(a,2)),c=Math.atan2(a,o);return{id:t.id,x:e.x+r*Math.cos(c+i-e.angle)*n/e.scale,y:e.y+r*Math.sin(c+i-e.angle)*n/e.scale,scale:t.scale*(n/e.scale),angle:t.angle+i-e.angle}}))):de(function(e,t,n,i,o){return{type:g,id:e,x:t,y:n,scale:i,angle:o}}(e.id,e.x,e.y,n,i))}function Se(e,t){G=!0,N=e,q=t,V=null,U=null,X=null,de(M(-1))}function Me(e,t,n,i){de(function(e,t){return{type:m,x:e,y:t}}(e,t)),N=n,q=i}function Ie(){V=null,U=null,X=null,G=null,J=!1,ce=!1,L.style.cursor="",ue(),se()}function Ee(e){e.preventDefault();var t=De(e),n=t.inputX,i=t.inputY,o=t.inputX2,a=t.inputY2;if(null!==le||P.isModalInfoVisible()){if(null!==le&&(clearTimeout(le),le=null,void 0===o&&void 0===a&&Te(n,i)))return void function(){for(var e=B.items.length-1;e>=0;e--){var t=B.items[e],n=te.isPointInRecord(ie({},t,{inputX:N,inputY:q,canvasScale:B.canvas.scale,skipCheckHandle:!0}));if("record"===n){if(!t.pinBack)return void P.onShowModalInfo(t);var i=te.getTransformedDimensions(t),o=i.x,a=i.y,r=i.width,c=i.height;return void Re(o,a,r,c)}}$e()}()}else le=setTimeout(function(){le=null},500);ce=!0,void 0===o&&void 0===a?K=setTimeout(Oe,1e3):clearTimeout(K),o&&a&&function(e,t,n,i){J=!0,N=e,q=t,W=n,F=i,Y=B.canvas.scale}(n,i,o,a);var r=B.items.filter(function(e){return e.id===B.selectedItem})[0];r?"record"===(X=te.isPointInRecord(ie({},r,{inputX:n,inputY:i,canvasScale:B.canvas.scale})))?ve(n,i,r):"handle"===X?we(n,i,r):Se(n,i):Se(n,i),z=N,_=q,he(1)}function Te(e,t){return Math.abs(e-z)<.02*L.width&&Math.abs(t-_)<.02*L.height}function Oe(){if(B.loadingItems)P.onShowModalInfo({caption:"Loading",body:"Items can't be editing during loading."});else{for(var e=B.items.filter(function(e){return e.id===B.selectedItem})[0],t=B.items.length-1;t>=0;t--){var n=B.items[t];if("record"===(X=te.isPointInRecord(ie({},n,{inputX:N,inputY:q,canvasScale:B.canvas.scale}))))return te.isRecordEnclosed(n,B.canvas,0,0,L.width/B.canvas.scale,L.height/B.canvas.scale)?void 0:n!==e?void ve(N,q,n):void P.onShowModalInfo(n);if("handle"===X&&n.id===B.selectedItem)return void we(N,q,n)}P.onMenu(B)}}function Re(e,t,n,i){var o,a,r,c,l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.05,d=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=(L.width-2*s*L.width)/n,h=(L.height-2*s*L.height)/i;u&&h&&(u<h?(c=(L.height-i*u)/2,o=u,a=-e*u+s*L.width,r=-t*u+c):(o=h,a=-e*h+(L.width-n*h)/2,r=-t*h+s*L.height),l||o!==B.canvas.scale||a!==B.canvas.x||r!==B.canvas.y?d?function(e,t,n){var i,o=B.canvas.scale,a=B.canvas.x,r=B.canvas.y;re=!0,requestAnimationFrame(function(c){i=c,function c(l){var s=l-i,d=s/300;d=Math.min(d,1),de(E(o+(e-o)*d,a+(t-a)*d,r+(n-r)*d)),s<300?requestAnimationFrame(c):(re=!1,Ie())}(c)})}(o,a,r):de(E(o,a,r)):$e())}function $e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[],i=[];B.items.forEach(function(e){var t=te.getTransformedDimensions(e),o=t.x,a=t.y,r=t.width,c=t.height;n.push(o),n.push(o+r),i.push(a),i.push(a+c)});var o=Math.min.apply(Math,n),a=Math.max.apply(Math,n)-o,r=Math.min.apply(Math,i);Re(o,r,a,Math.max.apply(Math,i)-r,!0,e,t)}function ke(){Ie(),clearTimeout(K)}function je(e){var t=De(e),n=t.inputX,i=t.inputY,o=t.inputX2,a=t.inputY2,r=n/B.canvas.scale,c=i/B.canvas.scale,l=r-N/B.canvas.scale,s=c-q/B.canvas.scale;J?function(e,t,n,i){var o=Math.sqrt(Math.pow(N-W,2)+Math.pow(q-F,2)),a=Math.sqrt(Math.pow(e-n,2)+Math.pow(t-i,2))/o;if(V){var r=Pe(N-W,q-F,e-n,t-i);xe(V,U,V.scale*a,r)}else if(G){var c=e+.5*(n-e),l=t+.5*(i-t),s=c-(c-B.canvas.x)*Y*a/B.canvas.scale,d=l-(l-B.canvas.y)*Y*a/B.canvas.scale;he(a>1?1:-1)||de(E(Y*a,s,d))}}(n,i,o,a):"handle"===X?function(e,t){var n=te.computeBorderSize(V),i=n.fullWidth,o=n.fullHeight,a=2*e+i*V.scale,r=2*t+o*V.scale,c=Math.sqrt(Math.pow(i,2)+Math.pow(o,2)),l=Math.sqrt(Math.pow(a,2)+Math.pow(r,2))/c,s=Pe(i,o,a,r);xe(V,U,l,s)}(l,s):V?be(l,s):G&&Me(l,s,n,i),ce&&!Te(n,i)&&clearTimeout(K)}function Ae(e){ae||(re=!0),clearTimeout(ae),ae=setTimeout(function(){ae=void 0,re=!1,ue(),se()},250);var t=e.wheelDelta?-e.wheelDelta/40:e.detail?e.detail:0;if(t){var n=De(e);!function(e,t,n){var i=Math.exp(.2*n),o=B.canvas.scale*i,a=e-(e-B.canvas.x)*i,r=t-(t-B.canvas.y)*i;he(n)||de(E(o,a,r))}(n.inputX,n.inputY,t)}return e.preventDefault()&&!1}function De(e){var t,n,i=e.touches?e.touches[0].clientX:e.clientX||e.pageX,o=e.touches?e.touches[0].clientY:e.clientY||e.pageY,a=L.getBoundingClientRect(),r=(i-a.left)*(L.width/a.width),c=(o-a.top)*(L.height/a.height);return e.touches&&e.touches.length>1&&(t=(e.touches[1].clientX-a.left)*(L.width/a.width),n=(e.touches[1].clientY-a.top)*(L.height/a.height)),{inputX:r,inputY:c,inputX2:t,inputY2:n}}function Pe(e,t,n,i){var o=Math.atan2(t,e),a=Math.atan2(i,n),r=V.angle+a-o,c=r>Math.PI?r-2*Math.PI:r;return Math.abs(c)<.05?0:c}var Ce={initialize:function(e,t){return C=c(j),P=t,(L=e).getContext?(H=L.getContext("2d"),te.init(H),L.addEventListener("mousedown",Ee,!1),L.addEventListener("touchstart",Ee,!1),window.addEventListener("mousemove",je,!1),window.addEventListener("touchmove",je,{passive:!0}),window.addEventListener("mouseup",ke,!1),window.addEventListener("touchend",ke,!1),L.addEventListener("DOMMouseScroll",Ae,!1),L.addEventListener("mousewheel",Ae,!1),window.addEventListener("resize",ye,!1),ye(),C.subscribe(function(){return se()})):console.log("canvas not supported"),C},transitionRoute:function(e){C.dispatch(function(e){return{type:x,state:e}}(e)),$e(.2,!1),ue()},replaceItems:function(e){de(function(e){return{type:w,items:e}}(e))},createItem:function(e,t,n){var i=function(){var e=B.items.map(function(e){return e.x}),t=B.items.map(function(e){return e.y}),n=Math.min.apply(Math,ne(e)),i=Math.max.apply(Math,ne(e)),o=Math.min.apply(Math,ne(t)),a=Math.max.apply(Math,ne(t));return{x:n+(i-n)/2,y:o+(a-o)/2}}(),o=new Image;o.crossOrigin="anonymous";var a=Date.now();o.onload=function(){var r=o.height,c=o.width;de(function(e){return{type:s,item:e}}({id:a,src:e,caption:t,body:n,angle:0,x:i.x,y:i.y,width:c,height:r,scale:.25*L.width/B.canvas.scale/c,border:!0,color:te.getDominantColor(o)}))},o.src=te.getFullSrc(e,a)},deleteItem:function(e){de(function(e){return{type:d,item:e}}(e))},updateItem:function(e,t){de(I(e,t))}},Be={selectedItem:-1,canvas:{id:1,x:-838.6,y:901.4,angle:0,scale:.5101,color:"#111",viewportTransform:[1,0,0,1,0,0]},items:[{id:2,caption:"Code projects",x:4141.8,y:-726.6,width:1024,height:786,color:"#2f54a8",angle:-.093,scale:.92394,pinBack:!0},{id:3,caption:"Places I've been",x:3505,y:364,width:1920,height:1080,color:"#f9f9fa",angle:0,scale:.37051,pinBack:!0,src:"3.gif"},{id:4,caption:"About me",x:2781.7,y:-531.4,width:1280,height:960,color:"#2c2b2e",angle:-.19,scale:1.03481,pinBack:!0},{id:5,caption:"Recommended books",x:3778.1,y:-54.9,width:1024,height:682,color:"#421607",angle:0,scale:.26476,pinBack:!0},{id:6,caption:"Art samples",x:4436,y:188,width:800,height:536,color:"#9e5d42",angle:.132,scale:1.10055,pinBack:!0},{id:7,caption:"Writing",x:5251.9,y:-557.3,width:1280,height:853,color:"#b0a582",angle:0,scale:.67548,pinBack:!0,src:"writing.jpg"},{id:201,caption:"AvsP video editor",x:4034.8,y:-823.6,width:458,height:317,color:"#acbedb",angle:-.093,scale:.38137,src:"201.png"},{id:202,caption:"DSNotes Homebrew",x:4094.6,y:-659.6,width:425,height:427,color:"#c3c0be",angle:-.093,scale:.24143},{id:203,caption:"QuickFits Rails application",x:3982.6,y:-672.9,width:1428,height:1230,color:"#797889",angle:-.093,scale:.04205},{id:204,caption:"Asteria JavaScript game",x:4000.1,y:-600.5,width:1682,height:1467,color:"#3e352a",angle:-.093,scale:.02287},{id:205,caption:"Frontend Framework comparison",x:4222.3,y:-588.2,width:1614,height:1290,color:"#f3f4f6",angle:-.093,scale:.04579},{id:206,caption:"HTML5 Canvas with Redux",x:4276.5,y:-767.7,width:932,height:812,color:"#202021",angle:-.093,scale:.22709},{id:301,caption:"Atlanta",x:3313,y:315,width:1024,height:768,color:"#8a7d6f",angle:0,scale:.00624},{id:302,caption:"Cancun",x:3313,y:343,width:1280,height:629,color:"#8fa3b1",angle:0,scale:.00158},{id:303,caption:"Chicago",x:3308,y:299,width:1024,height:689,color:"#635353",angle:0,scale:.01225},{id:304,caption:"Anaheim",x:3247,y:314,width:1024,height:683,color:"#8fa7b2",angle:0,scale:.00542},{id:305,caption:"Orlando",x:3325,y:327,width:1024,height:768,color:"#70839a",angle:0,scale:.00244},{id:306,caption:"Havana",x:3321,y:339,width:1024,height:771,color:"#7a808c",angle:0,scale:.00326},{id:307,caption:"London",x:3480,y:277,width:1280,height:816,color:"#7c8a8e",angle:0,scale:.00294},{id:308,caption:"New Orleans",x:3307,y:324,width:1024,height:768,color:"#8c8989",angle:0,scale:.00276},{id:309,caption:"Niagra Falls",x:3329,y:297,width:1280,height:964,color:"#869395",angle:0,scale:.00208},{id:310,caption:"Paris",x:3489,y:285,width:1024,height:670,color:"#756888",angle:0,scale:.00514},{id:311,caption:"Seoul",x:3737,y:307,width:1280,height:853,color:"#1f334e",angle:0,scale:.0093},{id:312,caption:"Washington DC",x:3332,y:309,width:1280,height:1003,color:"#7e8c87",angle:0,scale:.0021},{id:313,caption:"Venice",x:3509,y:291,width:1280,height:909,color:"#7e8c87",angle:0,scale:.00273},{id:314,caption:"Muskogee",x:3295,y:314,width:425,height:303,color:"#afb2b7",angle:0,scale:.01977},{id:315,caption:"Las Vegaas",x:3259.8,y:314.7,width:960,height:637,color:"#4b4139",angle:0,scale:.00606},{id:401,caption:"Rudy Lozano Leadership Academy",x:2619.7,y:-442.4,width:1024,height:768,color:"#9b999f",angle:-.19,scale:.12913},{id:402,caption:"University of Illinois",x:2302.7,y:-376.4,width:1024,height:581,color:"#4c5e4c",angle:-.19,scale:.11781},{id:403,caption:"Roh Square Consulting",x:2447.7,y:-416.4,width:1023,height:1121,color:"#a6a4a3",angle:-.19,scale:.09983},{id:404,caption:"Dev Bootcamp",x:2809.7,y:-479.4,width:640,height:486,color:"#8b4243",angle:-.19,scale:.21916},{id:405,caption:"BLUE1647",x:2987.7,y:-474.4,width:526,height:296,color:"#7c6f67",angle:-.19,scale:.21707},{id:406,caption:"Everspring",x:2963.7,y:-579.4,width:1920,height:1281,color:"#635a76",angle:-.19,scale:.05766},{id:407,caption:"Actualize",x:3178.7,y:-555.4,width:600,height:399,color:"#928976",angle:-.19,scale:.31055},{id:501,caption:"The Art of Game Design",x:3774.3,y:-62.5,width:355,height:499,color:"#eac4ac",angle:0,scale:.03808},{id:502,caption:"CSS Secrets",x:3785,y:-62.9,width:260,height:317,color:"#e7e2e7",angle:0,scale:.00105},{id:503,caption:"The Non-Designer's Design Book",x:3739.2,y:-64.6,width:490,height:700,color:"#626d69",angle:0,scale:.08658},{id:504,caption:"Presentation Zen",x:3784.4,y:-62.9,width:410,height:500,color:"#7480ab",angle:0,scale:.0014},{id:505,caption:"The Humane Interface",x:3790.3,y:-63.3,width:236,height:354,color:"#527f8a",angle:0,scale:.01969},{id:506,caption:"A Whole New Mind",x:3785.7,y:-62.9,width:432,height:648,color:"#e85f19",angle:0,scale:55e-5},{id:507,caption:"Drive",x:3785.4,y:-62.9,width:331,height:500,color:"#f6e9eb",angle:0,scale:23e-5},{id:508,caption:"Drawing on the Right Side of the Brain",x:3782.7,y:-62.9,width:500,height:620,color:"#c1b2a1",angle:0,scale:.00433},{id:509,caption:"Made to Stick",x:3786.5,y:-62.9,width:405,height:600,color:"#e85e2e",angle:0,scale:.00166},{id:510,caption:"Making Comics",x:3808.9,y:-64.2,width:329,height:499,color:"#d1c9b5",angle:0,scale:.06948},{id:601,caption:"Wolverine sketch",x:4408,y:213,width:700,height:1e3,color:"#dad7b8",angle:.132,scale:.07547},{id:602,caption:"Naruto",x:4330,y:56,width:800,height:1198,color:"#e4d6ce",angle:.132,scale:.06336},{id:603,caption:"Hand sketch",x:4594,y:94,width:800,height:1219,color:"#f6f4f6",angle:.132,scale:.03793},{id:604,caption:"Swordsman sketch",x:4511,y:213,width:800,height:1219,color:"#f3f1f3",angle:.132,scale:.1286},{id:605,caption:"Caminos Logo",x:4469,y:43,width:1856,height:968,color:"#e3e3e3",angle:.132,scale:.09639,src:"605.png"},{id:606,caption:"Graffiti",x:4288,y:163,width:2197,height:1264,color:"#7a7874",angle:.132,scale:.06796},{id:1537451826075,caption:"GitHub",x:3261,y:-99.7,width:660,height:630,color:"#b3b3b3",angle:-.19,scale:.06582,src:"github-mark.png"},{id:1537451881022,caption:"LinkedIn",x:3131.4,y:-72.6,width:615,height:604,color:"#7bb7d7",angle:-.19,scale:.06839,src:"linkedin-mark.png"},{id:1537451967618,caption:"Medium",x:3196.1,y:-84.8,width:396,height:360,color:"#95e9c1",angle:-.19,scale:.11469,src:"medium-mark.png"},{id:1537459297631,caption:"Melbourne",x:3766.7,y:464.3,width:960,height:627,color:"#656966",angle:0,scale:.01057,src:"melbourne.jpg"},{id:1537459516207,caption:"Sydney",x:3778.6,y:454.4,width:1280,height:707,color:"#3c3c39",angle:0,scale:.00869,src:"sydney.jpg"},{id:1537905916713,caption:"Modern JavaScript Explained For Dinosaurs",x:4977.1,y:-642.4,width:1498,height:974,color:"#c8ddbb",angle:0,scale:.11163,src:"modern-javascript.png"},{id:1537906396812,caption:"Modern CSS Explained For Dinosaurs",x:4976.9,y:-482.5,width:1129,height:735,color:"#c4dab9",angle:0,scale:.15637,src:"modern-css.png"},{id:1537906667943,caption:"A minimalist guide to tmux",x:5372,y:-637.5,width:1432,height:972,color:"#eff3ef",angle:0,scale:.04697,src:"minimalist-tmux.png"},{id:1537907080985,caption:"Comparing Frontend Approaches",x:5258,y:-655,width:1346,height:970,color:"#f6f5f0",angle:0,scale:.10275,src:"comparing-frontend-approaches.png"},{id:1537965881687,caption:"How To Learn Vim: A Four Week Plan",x:5371.2,y:-690.1,width:813,height:269,color:"#252526",angle:0,scale:.08443,src:"learn-vim.png"},{id:1537966465026,caption:"A Metric-Based Approach to Two-Dimensional (2D) Tool-Path Optimization for High-Speed Machining",x:5223.3,y:-453.2,width:630,height:337,color:"#10abe5",angle:0,scale:.1248,src:"asme.jpg"},{id:1537967040683,caption:"What is Teachable Code?",x:5218.5,y:-537.8,width:876,height:1136,color:"#6c961c",angle:0,scale:.06855,src:"pragpub87.png"},{id:1537967579904,caption:"A Functional Canvas Approach With Redux",x:5332.1,y:-538,width:1327,height:685,color:"#3a373c",angle:0,scale:.11302,src:"functional-canvas.png"}],loadingItems:!0},Le={props:null,$modal:document.getElementById("modal-info"),$caption:document.querySelector("#modal-info .caption"),$body:document.querySelector("#modal-info .body"),$buttonClose:document.querySelector("#modal-info-close"),$buttonEdit:document.querySelector("#modal-info-edit"),$buttonDelete:document.querySelector("#modal-info-delete"),visible:!1,initialize:function(){return this.isSolid=!1,this.bindEvents(),this},hide:function(){this.$caption.style.pointerEvents="none",this.$body.style.pointerEvents="none",this.$modal.style.opacity=0,this.$caption.innerHTML="",this.$body.innerHTML="",this.$buttonEdit.style.display="none",this.$buttonDelete.style.display="none",this.visible=!1,this.isSolid=!1},show:function(e){this.props=e,this.$caption.style.pointerEvents="auto",this.$modal.style.opacity=.8,this.$caption.innerHTML=this.props.item.caption,this.$body.innerHTML=void 0!==this.props.item.body?this.props.item.body:"Loading...",this.props.item.id&&void 0!==this.props.item.body&&(this.$buttonEdit.style.display="inline",this.$buttonDelete.style.display="inline"),this.visible=!0},bindEvents:function(){var e=this;this.$caption.onmousedown=function(t){t.preventDefault(),e.isSolid=!e.isSolid,e.isSolid?(e.$modal.style.opacity=1,e.$modal.style.pointerEvents="auto",e.$body.style.pointerEvents="auto"):(e.$modal.style.opacity=.8,e.$modal.style.pointerEvents="none",e.$body.style.pointerEvents="none")},this.$buttonClose.onclick=function(t){t.preventDefault(),e.hide()},this.$buttonEdit.onclick=function(t){t.preventDefault(),e.props.onEdit(e.props.item),e.hide()},this.$buttonDelete.onclick=function(t){t.preventDefault(),e.props.onDelete(e.props.item),e.hide()}}}.initialize(),He={props:null,$modal:document.getElementById("modal-menu"),$buttonSave:document.querySelector("#modal-menu-save"),$buttonReset:document.querySelector("#modal-menu-reset"),$buttonClose:document.querySelector("#modal-menu-close"),$buttonNew:document.querySelector("#modal-menu-new"),visible:!1,initialize:function(){return this.bindEvents(),this},hide:function(){this.$modal.style.display="none",this.visible=!1},show:function(e){this.props=e,this.$modal.style.display="block",this.visible=!0},bindEvents:function(){var e=this;this.$buttonClose.onclick=function(t){t.preventDefault(),e.hide()},this.$buttonSave.onclick=function(t){t.preventDefault(),e.props.onSaveLayout(),e.hide()},this.$buttonReset.onclick=function(t){t.preventDefault(),e.props.onResetLayout(),e.hide()},this.$buttonNew.onclick=function(t){t.preventDefault(),e.props.onNewRecord(),e.hide()}}}.initialize(),Ne={props:null,$modal:document.getElementById("modal-new"),$buttonSave:document.querySelector("#modal-new-save"),$buttonCancel:document.querySelector("#modal-new-cancel"),$inputImage:document.querySelector("#modal-new-image"),$inputCaption:document.querySelector("#modal-new-caption"),$inputBody:document.querySelector("#modal-new-body"),$buttonClose:document.querySelector("#modal-new-close"),visible:!1,initialize:function(){return this.bindEvents(),this},hide:function(){this.$modal.style.display="none",this.$inputImage.value="",this.$inputCaption.value="",this.$inputBody.value="",this.visible=!1},show:function(e){this.props=e,this.$modal.style.display="block",this.visible=!0},bindEvents:function(){var e=this;this.$buttonClose.onclick=function(t){t.preventDefault(),e.hide()},this.$buttonCancel.onclick=function(t){t.preventDefault(),e.hide()},this.$buttonSave.onclick=function(t){t.preventDefault(),e.props.onSaveRecord(e.$inputImage.value,e.$inputCaption.value,e.$inputBody.value),e.hide()}}}.initialize(),qe={props:null,$modal:document.getElementById("modal-edit"),$buttonSave:document.querySelector("#modal-edit-save"),$buttonCancel:document.querySelector("#modal-edit-cancel"),$inputCaption:document.querySelector("#modal-edit-caption"),$inputBody:document.querySelector("#modal-edit-body"),$buttonClose:document.querySelector("#modal-edit-close"),visible:!1,initialize:function(){return this.bindEvents(),this},hide:function(){this.$modal.style.display="none",this.$inputCaption.value="",this.$inputBody.value="",this.visible=!1},show:function(e){this.props=e,this.$modal.style.display="block",this.$inputCaption.value=this.props.item.caption,this.$inputBody.value=this.props.item.body,this.visible=!0},bindEvents:function(){var e=this;this.$buttonClose.onclick=function(t){t.preventDefault(),e.hide()},this.$buttonCancel.onclick=function(t){t.preventDefault(),e.hide()},this.$buttonSave.onclick=function(t){t.preventDefault(),e.props.onEditRecord(e.props.item.id,e.$inputCaption.value,e.$inputBody.value),e.hide()}}}.initialize();function ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({initialize:function(){this.initializeCanvas(),this.loadCanvasData("data.json"),this.hideWebsiteTitle()},initializeCanvas:function(){Ce.initialize(document.getElementById("canvas"),{onTransition:this.handleTransition.bind(this),onSave:this.handleSave.bind(this),onMenu:this.handleMenu.bind(this),onShowModalInfo:this.handleShowModalInfo.bind(this),onHideModalInfo:this.handleHideModalInfo.bind(this),isModalInfoVisible:function(){return Le.visible}})},loadCanvasData:function(e){var t=this.getInitialState();Ce.transitionRoute(t),fetch(e).then(function(e){return e.json()}).then(function(e){Ce.replaceItems(e.items)})},getInitialState:function(){var e=localStorage.getItem("state"),t=e?JSON.parse(e):Be;return t.items=t.items.map(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){ze(e,t,n[t])})}return e}({},e,{border:!0})}),t},hideWebsiteTitle:function(){setTimeout(function(){document.querySelector("#title h1").style.color="#333",document.querySelector("#title p").style.opacity=0},6e3)},handleTransition:function(e,t){return e<0||!!t&&(Le.show({item:t,onEdit:this.handleEditRecord.bind(this),onDelete:this.handleDeleteRecord.bind(this)}),!0)},handleMenu:function(e){He.show({onSaveLayout:this.handleSave.bind(null,e),onResetLayout:this.handleResetLayout,onNewRecord:this.handleNewRecord.bind(this)})},handleResetLayout:function(){localStorage.removeItem("state"),location.reload()},handleSave:function(e){console.clear();var t={selectedItem:-1,canvas:{id:e.canvas.id,x:Math.round(10*e.canvas.x)/10,y:Math.round(10*e.canvas.y)/10,angle:Math.round(1e3*e.canvas.angle)/1e3,scale:Math.round(1e5*e.canvas.scale)/1e5,color:e.canvas.color,viewportTransform:e.canvas.viewportTransform},items:e.items.map(function(e){var t={id:e.id,caption:e.caption,x:Math.round(10*e.x)/10,y:Math.round(10*e.y)/10,width:e.width,height:e.height,color:e.color,angle:Math.round(1e3*e.angle)/1e3,scale:Math.round(1e5*e.scale)/1e5,body:e.body,border:e.border};return e.pinBack&&(t.pinBack=e.pinBack),e.src!=="".concat(e.id,".jpg")&&(t.src=e.src),t}).sort(function(e,t){return e.id-t.id})},n=JSON.stringify(t,null,2);localStorage.setItem("state",n),console.log(n)},handleNewRecord:function(){Ne.show({onSaveRecord:this.handleSaveRecord})},handleSaveRecord:function(e,t,n){Ce.createItem(e,t,n)},handleEditRecord:function(e){qe.show({item:e,onEditRecord:this.handleUpdateRecord.bind(this)})},handleUpdateRecord:function(e,t,n){Ce.updateItem(e,{caption:t,body:n})},handleDeleteRecord:function(e){Ce.deleteItem(e)},handleShowModalInfo:function(e){Le.show({item:e,onEdit:this.handleEditRecord.bind(this),onDelete:this.handleDeleteRecord.bind(this)})},handleHideModalInfo:function(){Le.visible&&Le.hide()}}).initialize()}]);</script>
