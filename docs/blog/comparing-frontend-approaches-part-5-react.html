<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comparing Frontend Approaches Part 5: React</title>
    <meta name="description" content="A look at jQuery, Vue.js, React, and Elm">
    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="/css/prism-base16-monokai.dark.css">
    <link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="peterxjang">
    <link rel="alternate" href="/feed/feed.json" type="application/json" title="peterxjang">
  </head>
  <body>
    <header class="sticky">
      <ul class="nav">
      
        <li class="nav-item"><a href="/"><strong>peterxjang</strong></a></li>
        <li class="nav-item"><a href="/blog/">blog</a></li>
        <li class="nav-item" style="margin-left: auto">
          <a target="_blank" rel="noopener noreferrer me" href="https://twitter.com/peterxjang" aria-label="Twitter">
            <svg class="nav-icon" viewBox="0 0 29 29"><path d="M22.05 7.54a4.47 4.47 0 0 0-3.3-1.46 4.53 4.53 0 0 0-4.53 4.53c0 .35.04.7.08 1.05A12.9 12.9 0 0 1 5 6.89a5.1 5.1 0 0 0-.65 2.26c.03 1.6.83 2.99 2.02 3.79a4.3 4.3 0 0 1-2.02-.57v.08a4.55 4.55 0 0 0 3.63 4.44c-.4.08-.8.13-1.21.16l-.81-.08a4.54 4.54 0 0 0 4.2 3.15 9.56 9.56 0 0 1-5.66 1.94l-1.05-.08c2 1.27 4.38 2.02 6.94 2.02 8.3 0 12.86-6.9 12.84-12.85.02-.24 0-.43 0-.65a8.68 8.68 0 0 0 2.26-2.34c-.82.38-1.7.62-2.6.72a4.37 4.37 0 0 0 1.95-2.51c-.84.53-1.81.9-2.83 1.13z"></path></svg>
          </a>
        </li>
        <li class="nav-item"">
          <a target="_blank" rel="noopener noreferrer me" href="https://github.com/peterxjang" aria-label="GitHub">
            <svg class="nav-icon" viewBox="-8 -5 34 34"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>
          </a>
        </li>
        <li class="nav-item">
          <a target="_blank" rel="noopener noreferrer me" href="https://linkedin.com/in/peterxjang" aria-label="LinkedIn">
            <svg class="nav-icon" viewBox="0 0 29 29"><path d="M5 6.36C5 5.61 5.63 5 6.4 5h16.2c.77 0 1.4.61 1.4 1.36v16.28c0 .75-.63 1.36-1.4 1.36H6.4c-.77 0-1.4-.6-1.4-1.36V6.36z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M10.76 20.9v-8.57H7.89v8.58h2.87zm-1.44-9.75c1 0 1.63-.65 1.63-1.48-.02-.84-.62-1.48-1.6-1.48-.99 0-1.63.64-1.63 1.48 0 .83.62 1.48 1.59 1.48h.01zM12.35 20.9h2.87v-4.79c0-.25.02-.5.1-.7.2-.5.67-1.04 1.46-1.04 1.04 0 1.46.8 1.46 1.95v4.59h2.87v-4.92c0-2.64-1.42-3.87-3.3-3.87-1.55 0-2.23.86-2.61 1.45h.02v-1.24h-2.87c.04.8 0 8.58 0 8.58z" fill="#fff"></path></svg>
          </a>
        </li>
      </ul>
    </header>

    <main class="tmpl-post">
      <div class="post-title">
  <h1>Comparing Frontend Approaches Part 5: React</h1>
  <time class="postlist-date" datetime="2017-09-23">23 Sep 2017</time>
</div>

<ul>
<li><a href="comparing-frontend-approaches-part-1-introduction.html">Part 1: Introduction</a></li>
<li><a href="comparing-frontend-approaches-part-2-jquery.html">Part 2: jQuery</a></li>
<li><a href="comparing-frontend-approaches-part-3-vuejs.html">Part 3: Vue.js</a></li>
<li><a href="comparing-frontend-approaches-part-4-vuejs-with-components.html">Part 4: Vue.js with components</a></li>
<li><strong>Part 5: React</strong></li>
<li><a href="comparing-frontend-approaches-part-6-elm.html">Part 6: Elm</a></li>
<li><a href="comparing-frontend-approaches-part-7-final-thoughts.html">Part 7: Final thoughts</a></li>
</ul>
<p>In this part we will be implementing the <a href="comparing-frontend-approaches-part-1-introduction.html">web based clone</a> of the <a href="https://support.apple.com/kb/PH22608?locale=en_US">Mac Notes app</a> using <a href="https://facebook.github.io/react/">React</a>. React is a JavaScript framework that was created around 2011 and open-sourced in 2013. It currently has won over developer mindshare in a big way and is the most popular framework in 2017 by various metrics (over 75,000 stars on GitHub).</p>
<p>React pioneered the virtual DOM approach (at least in JavaScript frameworks), where the HTML is completely generated through JavaScript instead of a template. It also was one of the first frontend frameworks to push for a completely component centered approach. Unlike <a href="https://vuejs.org/">Vue.js</a>, which bills itself as a progressive framework (i.e., you don’t need to start with components, you can work your way up there), React is a bit more insistent (the <a href="https://facebook.github.io/react/docs/thinking-in-react.html#step-1-break-the-ui-into-a-component-hierarchy">very first step</a> they recommend is to break the UI into components). Let’s see what it looks like in practice!</p>
<blockquote>
<p>Note — this isn’t meant to be a tutorial for people completely new to React. In particular, React uses a lot of new JavaScript ES2015+ features, which I won’t be covering in full detail. You can check out <a href="https://babeljs.io/learn-es2015/">this resource</a> first if you’d like an overview of these new features before reading this post.</p>
</blockquote>
<h3 id="installation">Installation <a class="direct-link" href="#installation">#</a></h3>
<p>Like <a href="comparing-frontend-approaches-part-4-vuejs-with-components.html">Vue.js with components</a>, getting started with React can be a bit tricky, since writing code with components involves bundling code in separate files, requiring a build step. Fortunately, like Vue.js, React offers an official command line tool to scaffold your projects, called <a href="https://github.com/facebookincubator/create-react-app">Create React App</a>. If you don’t already have it installed, you can install it with the command:</p>
<pre><code>$ npm install -g create-react-app
</code></pre>
<p>Once you have it installed, you can navigate to the directory you want to create your project in and run:</p>
<pre><code>$ create-react-app my-app
</code></pre>
<p>You should replace <code>my-app</code> with whatever name you want your particular project to have. This will take a little while to create files and folders and download the necessary packages from npm. In the end you will end up a new folder called <code>my-app</code> with the following project structure:</p>
<pre><code>my-app
├── README.md
├── node_modules
├── package.json
├── .gitignore
├── public
│   └── favicon.ico
│   └── index.html
│   └── manifest.json
└── src
    └── App.css
    └── App.js
    └── App.test.js
    └── index.css
    └── index.js
    └── logo.svg
    └── registerServiceWorker.js
</code></pre>
<p>Again, even though there’s a lot of files, you don’t need to worry about most of them for right now — pretty much all of our work will be in the <code>src</code> directory. At this point you already have a hello world app built for you, which you can see by entering the following commands:</p>
<pre><code>$ cd my-app$ npm start
</code></pre>
<p>The last command will run a dev server and automatically open up your browser to <code>localhost:3000</code>, where you should see something like this:</p>
<p><img src="/img/1__T____IgXdlzLHGwJ2ftWBpVg.png" alt="Default create-react-ap home page"></p>
<p>This is pretty cool, and what’s cooler is that you have a hot-reloading environment already set up for you. What that means is that if you make changes to your code, the browser at <code>localhost:3000</code> will automatically refresh. As it says, the place to start making changes is <strong><code>src/App.js</code></strong>, which right now looks like this:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> logo <span class="token keyword">from</span> <span class="token string">"./logo.svg"</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token string">"./App.css"</span><span class="token punctuation">;</span><br><br><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span><br>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token punctuation">(</span><br>      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"App"</span><span class="token operator">></span><br>        <span class="token operator">&lt;</span>header className<span class="token operator">=</span><span class="token string">"App-header"</span><span class="token operator">></span><br>          <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token punctuation">{</span>logo<span class="token punctuation">}</span> className<span class="token operator">=</span><span class="token string">"App-logo"</span> alt<span class="token operator">=</span><span class="token string">"logo"</span> <span class="token operator">/</span><span class="token operator">></span><br>          <span class="token operator">&lt;</span>h1 className<span class="token operator">=</span><span class="token string">"App-title"</span><span class="token operator">></span>Welcome to React<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><br>        <span class="token operator">&lt;</span><span class="token operator">/</span>header<span class="token operator">></span><br>        <span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token string">"App-intro"</span><span class="token operator">></span><br>          To <span class="token keyword">get</span> started<span class="token punctuation">,</span> edit <span class="token operator">&lt;</span>code<span class="token operator">></span>src<span class="token operator">/</span>App<span class="token punctuation">.</span>js<span class="token operator">&lt;</span><span class="token operator">/</span>code<span class="token operator">></span> and save to reload<span class="token punctuation">.</span><br>        <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span><br>      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span></code></pre>
<p>This is a React component — it makes heavy use of both <a href="https://babeljs.io/learn-es2015/">ES2015 JavaScript features</a> (imports, destructuring, classes) as well as <a href="https://facebook.github.io/react/docs/jsx-in-depth.html">JSX</a>. JSX is syntax which allows you to write what looks like HTML in the middle of your JavaScript (it’s not actually HTML, it gets converted into JavaScript statements during a build step). So your HTML template is defined in your JavaScript, there are no separate files for your HTML. In this example, the CSS is defined in the separate <strong><code>App.css</code></strong> file and is imported into the JavaScript as well. This means we can install our notes template by changing <strong><code>src/App.js</code></strong> as follows:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token string">"./App.css"</span><span class="token punctuation">;</span><br><br><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span><br>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token punctuation">(</span><br>      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">></span><br>        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"toolbar"</span><span class="token operator">></span><br>          <span class="token operator">&lt;</span>button className<span class="token operator">=</span><span class="token string">"toolbar-button"</span><span class="token operator">></span>New<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span><br>          <span class="token operator">&lt;</span>button className<span class="token operator">=</span><span class="token string">"toolbar-button"</span><span class="token operator">></span>Delete<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span><br>          <span class="token operator">&lt;</span>input className<span class="token operator">=</span><span class="token string">"toolbar-search"</span> type<span class="token operator">=</span><span class="token string">"text"</span> placeholder<span class="token operator">=</span><span class="token string">"Search..."</span> <span class="token operator">/</span><span class="token operator">></span><br>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><br>        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"note-container"</span><span class="token operator">></span><br>          <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"note-selectors"</span><span class="token operator">></span><br>            <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"note-selector active"</span><span class="token operator">></span><br>              <span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token string">"note-selector-title"</span><span class="token operator">></span>First note<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span><br>              <span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token string">"note-selector-timestamp"</span><span class="token operator">></span>Timestamp here<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span><br>            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><br>            <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"note-selector"</span><span class="token operator">></span><br>              <span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token string">"note-selector-title"</span><span class="token operator">></span>Second note<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span><br>              <span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token string">"note-selector-timestamp"</span><span class="token operator">></span>Timestamp here<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span><br>            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><br>            <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"note-selector"</span><span class="token operator">></span><br>              <span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token string">"note-selector-title"</span><span class="token operator">></span>Third note<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span><br>              <span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token string">"note-selector-timestamp"</span><span class="token operator">></span>Timestamp here<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span><br>            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><br>          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><br>          <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"note-editor"</span><span class="token operator">></span><br>            <span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token string">"note-editor-info"</span><span class="token operator">></span>Timestamp here<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span><br>            <span class="token operator">&lt;</span>textarea className<span class="token operator">=</span><span class="token string">"note-editor-input"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>textarea<span class="token operator">></span><br>          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><br>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><br>      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span></code></pre>
<p>Note that I had to convert the HTML to JSX, which is mostly the same but with minor differences to keep the syntax compatible with JavaScript. In this case, the HTML <code>class</code> attribute had to be renamed to <code>className</code> (since <code>class</code> is a reserved word in JavaScript). Once the JavaScript is set up, we can add the note template’s CSS in the <strong><code>App.css</code></strong> file as follows:</p>
<pre class="language-css"><code class="language-css"><span class="token comment">/* RESET */</span><br><span class="token selector">*</span> <span class="token punctuation">{</span><br>  <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br>  <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br>  <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br>  <span class="token property">outline</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><br>  <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">/* LAYOUT */</span><br><span class="token selector">#app</span> <span class="token punctuation">{</span><br>  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span><br>  <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span><br>  <span class="token property">min-height</span><span class="token punctuation">:</span> 100vh<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token selector">.toolbar</span> <span class="token punctuation">{</span><br>  <span class="token property">padding</span><span class="token punctuation">:</span> 0.5em<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token selector">.toolbar-button,<br>.toolbar-search</span> <span class="token punctuation">{</span><br>  <span class="token property">padding</span><span class="token punctuation">:</span> inherit<span class="token punctuation">;</span><br>  <span class="token property">border-radius</span><span class="token punctuation">:</span> 0.3em<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token selector">.toolbar-search</span> <span class="token punctuation">{</span><br>  <span class="token property">float</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token selector">.note-container</span> <span class="token punctuation">{</span><br>  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span><br>  <span class="token property">flex</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token selector">.note-selectors</span> <span class="token punctuation">{</span><br>  <span class="token property">flex</span><span class="token punctuation">:</span> 0 0 13em<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token selector">.note-selector</span> <span class="token punctuation">{</span><br>  <span class="token property">padding</span><span class="token punctuation">:</span> 1em<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token selector">.note-selector p</span> <span class="token punctuation">{</span><br>  <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token selector">.note-editor</span> <span class="token punctuation">{</span><br>  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span><br>  <span class="token property">flex</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span><br>  <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token selector">.note-editor-info</span> <span class="token punctuation">{</span><br>  <span class="token property">padding</span><span class="token punctuation">:</span> 0.5em<span class="token punctuation">;</span><br>  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token selector">.note-editor-input</span> <span class="token punctuation">{</span><br>  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span><br>  <span class="token property">flex</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span><br>  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><br>  <span class="token property">padding</span><span class="token punctuation">:</span> 0 2em 0 2em<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">/* COLORS */</span><br><span class="token selector">*</span> <span class="token punctuation">{</span><br>  <span class="token property">color</span><span class="token punctuation">:</span> #454545<span class="token punctuation">;</span><br>  <span class="token property">background-color</span><span class="token punctuation">:</span> #fafaf8<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token selector">.toolbar</span> <span class="token punctuation">{</span><br>  <span class="token property">background-color</span><span class="token punctuation">:</span> #dcdadc<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token selector">.toolbar-button</span> <span class="token punctuation">{</span><br>  <span class="token property">background-color</span><span class="token punctuation">:</span> #ffffff<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token selector">.toolbar-button:active</span> <span class="token punctuation">{</span><br>  <span class="token property">background-color</span><span class="token punctuation">:</span> #aaaaaa<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token selector">.note-selectors</span> <span class="token punctuation">{</span><br>  <span class="token property">border-right</span><span class="token punctuation">:</span> 1px solid #dcdadc<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token selector">.note-selector</span> <span class="token punctuation">{</span><br>  <span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px solid #dcdadc<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token selector">.note-selector.active</span> <span class="token punctuation">{</span><br>  <span class="token property">background-color</span><span class="token punctuation">:</span> #fce18d<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token selector">.note-selector-title</span> <span class="token punctuation">{</span><br>  <span class="token property">background-color</span><span class="token punctuation">:</span> inherit<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token selector">.note-selector-timestamp</span> <span class="token punctuation">{</span><br>  <span class="token property">color</span><span class="token punctuation">:</span> #626262<span class="token punctuation">;</span><br>  <span class="token property">background-color</span><span class="token punctuation">:</span> inherit<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token selector">.note-editor-info</span> <span class="token punctuation">{</span><br>  <span class="token property">color</span><span class="token punctuation">:</span> #dcdadc<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">/* TYPOGRAPHY */</span><br><span class="token selector">body</span> <span class="token punctuation">{</span><br>  <span class="token property">font-family</span><span class="token punctuation">:</span> sans-serif<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token selector">.note-selector-title</span> <span class="token punctuation">{</span><br>  <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token selector">.note-selector-timestamp</span> <span class="token punctuation">{</span><br>  <span class="token property">font-size</span><span class="token punctuation">:</span> 0.7em<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token selector">.note-editor,<br>.note-editor-input</span> <span class="token punctuation">{</span><br>  <span class="token property">font-size</span><span class="token punctuation">:</span> 0.9em<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>If you look at your browser, you should see our familiar notes app starting point!</p>
<h3 id="refactor-into-components">Refactor into components <a class="direct-link" href="#refactor-into-components">#</a></h3>
<p>The next step is to break this <strong><code>src/App.js</code></strong> file into components. Here is a diagram of the different components we can break this app into:</p>
<pre><code>&lt;App&gt;
├── &lt;Toolbar&gt;
└── &lt;NoteContainer&gt;
    ├── &lt;NoteSelectors&gt;
    │   └── &lt;NoteSelector&gt;
    │   └── &lt;NoteSelector&gt;
    │   └── &lt;NoteSelector&gt;
    └── &lt;NoteEditor&gt;
</code></pre>
<p>You could of course break it down even further (with individual button components for the toolbar for example), but this is a good starting point. Using this structure, the <strong><code>src/App.js</code></strong> file would now look like:</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span></span><br><ins class="highlight-line highlight-line-add"><span class="token keyword">import</span> Toolbar <span class="token keyword">from</span> <span class="token string">"./components/Toolbar"</span><span class="token punctuation">;</span></ins><br><ins class="highlight-line highlight-line-add"><span class="token keyword">import</span> NoteContainer <span class="token keyword">from</span> <span class="token string">"./components/NoteContainer"</span><span class="token punctuation">;</span></ins><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token string">"./App.css"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">></span></span><br><ins class="highlight-line highlight-line-add">        <span class="token operator">&lt;</span>Toolbar <span class="token operator">/</span><span class="token operator">></span></ins><br><ins class="highlight-line highlight-line-add">        <span class="token operator">&lt;</span>NoteContainer <span class="token operator">/</span><span class="token operator">></span></ins><br><span class="highlight-line">      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span></span></code></pre>
<p>The template essentially only contains the <code>&lt;Toolbar /&gt;</code> and <code>&lt;NoteContainer /&gt;</code>custom component tags, which are imported above (note the self closing tags, which is the recommended style for components without any content). Let’s take a look at one of the sub-components, <strong><code>src/components/Toolbar.js</code></strong>:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span><br><br><span class="token keyword">class</span> <span class="token class-name">Toolbar</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span><br>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token punctuation">(</span><br>      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"toolbar"</span><span class="token operator">></span><br>        <span class="token operator">&lt;</span>button className<span class="token operator">=</span><span class="token string">"toolbar-button"</span><span class="token operator">></span>New<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span><br>        <span class="token operator">&lt;</span>button className<span class="token operator">=</span><span class="token string">"toolbar-button"</span><span class="token operator">></span>Delete<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span><br>        <span class="token operator">&lt;</span>input className<span class="token operator">=</span><span class="token string">"toolbar-search"</span> type<span class="token operator">=</span><span class="token string">"text"</span> placeholder<span class="token operator">=</span><span class="token string">"Search..."</span> <span class="token operator">/</span><span class="token operator">></span><br>      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">export</span> <span class="token keyword">default</span> Toolbar<span class="token punctuation">;</span></code></pre>
<p>As you can see, it’s the same as before — you create a new class which extends the React <code>Component</code> class, and you write a <code>render</code> function which defines the JSX template.</p>
<p>So breaking things into components is a pretty straightforward task. The harder part comes when dealing with data and events. If you want to see what the rest of the components look like right now (they pretty much follow the same pattern), you can check them out in full detail <a href="https://github.com/peterxjang/notes-app-react/tree/8b1b7c37e05b69d4e80d6ba67118ae77ec3de82b/src/components">here</a>.</p>
<ul>
<li><a href="https://github.com/peterxjang/notes-app-react/blob/8b1b7c37e05b69d4e80d6ba67118ae77ec3de82b/src/components/Toolbar.js">Toolbar.js</a></li>
<li><a href="https://github.com/peterxjang/notes-app-react/blob/8b1b7c37e05b69d4e80d6ba67118ae77ec3de82b/src/components/NoteContainer.js">NoteContainer.js</a></li>
<li><a href="https://github.com/peterxjang/notes-app-react/blob/8b1b7c37e05b69d4e80d6ba67118ae77ec3de82b/src/components/NoteSelectors.js">NoteSelectors.js</a></li>
<li><a href="https://github.com/peterxjang/notes-app-react/blob/8b1b7c37e05b69d4e80d6ba67118ae77ec3de82b/src/components/NoteSelector.js">NoteSelector.js</a></li>
<li><a href="https://github.com/peterxjang/notes-app-react/blob/8b1b7c37e05b69d4e80d6ba67118ae77ec3de82b/src/components/NoteEditor.js">NoteEditor.js</a></li>
</ul>
<h3 id="display-note-titles-from-an-array-of-notes">Display note titles from an array of notes <a class="direct-link" href="#display-note-titles-from-an-array-of-notes">#</a></h3>
<p>Now that things are broken into components, we have to make some choices when it comes to storing and passing data. For the array of notes, it makes sense for the main <code>&lt;App&gt;</code> component to keep track of the notes and pass it down to its children. This would make the code in <strong><code>src/App.js</code></strong> look like:</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> Toolbar <span class="token keyword">from</span> <span class="token string">"./components/Toolbar"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> NoteContainer <span class="token keyword">from</span> <span class="token string">"./components/NoteContainer"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token string">"./App.css"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span><br><ins class="highlight-line highlight-line-add">  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></ins><br><ins class="highlight-line highlight-line-add">    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span></ins><br><ins class="highlight-line highlight-line-add">    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span></ins><br><ins class="highlight-line highlight-line-add">      notes<span class="token operator">:</span> <span class="token punctuation">[</span></ins><br><ins class="highlight-line highlight-line-add">        <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> body<span class="token operator">:</span> <span class="token string">"This is a first test"</span><span class="token punctuation">,</span> timestamp<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></ins><br><ins class="highlight-line highlight-line-add">        <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> body<span class="token operator">:</span> <span class="token string">"This is a second test"</span><span class="token punctuation">,</span> timestamp<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></ins><br><ins class="highlight-line highlight-line-add">        <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> body<span class="token operator">:</span> <span class="token string">"This is a third test"</span><span class="token punctuation">,</span> timestamp<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></ins><br><ins class="highlight-line highlight-line-add">      <span class="token punctuation">]</span><span class="token punctuation">,</span></ins><br><ins class="highlight-line highlight-line-add">    <span class="token punctuation">}</span><span class="token punctuation">;</span></ins><br><ins class="highlight-line highlight-line-add">  <span class="token punctuation">}</span></ins><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">></span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span>Toolbar <span class="token operator">/</span><span class="token operator">></span></span><br><ins class="highlight-line highlight-line-add">        <span class="token operator">&lt;</span>NoteContainer notes<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>notes<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></ins><br><span class="highlight-line">      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span></span></code></pre>
<p>Here we have to make a custom <code>constructor</code> function for the class, which first runs the <code>Component</code> constructor with <code>super(props);</code>, then defines the custom <code>state</code> for the instance (which is equivalent to Vue.js’ <code>data</code> option). Once the <code>state</code> is stored upon initialization, we can pass it to the <code>&lt;NoteContainer&gt;</code> component with the line:</p>
<pre class="language-js"><code class="language-js">        <span class="token operator">&lt;</span>NoteContainer notes<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>notes<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></code></pre>
<p>In JSX, you can write any JavaScript you want in single curly brackets (as opposed to double curly brackets in Vue.js). Here we’re taking the <code>notes</code> initialized in the component’s <code>state</code> and binding it to the child <code>&lt;NoteContainer&gt;</code> component. The <code>&lt;NoteContainer&gt;</code> component doesn’t directly use the notes data — instead it passes it down to the next child component. The code in <strong><code>src/components/NoteContainer.js</code></strong> looks like:</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> NoteSelectors <span class="token keyword">from</span> <span class="token string">"./NoteSelectors"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> NoteEditor <span class="token keyword">from</span> <span class="token string">"./NoteEditor"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">class</span> <span class="token class-name">NoteContainer</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"note-container"</span><span class="token operator">></span></span><br><ins class="highlight-line highlight-line-add">        <span class="token operator">&lt;</span>NoteSelectors notes<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>notes<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></ins><br><span class="highlight-line">        <span class="token operator">&lt;</span>NoteEditor <span class="token operator">/</span><span class="token operator">></span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> NoteContainer<span class="token punctuation">;</span></span></code></pre>
<p>Note the change in terminology — this time <code>notes</code> is referred to using <code>props</code>, not <code>state</code>. It’s worth going over in more detail here:</p>
<ul>
<li>The parent <code>&lt;App&gt;</code> component contains the note data, stored in its <code>state</code>. It has the ability to make changes to its own state, as well as pass any part of it down to its child components.</li>
<li>Any data a child component receives from its parent component is stored in <code>props</code>. In this case the child <code>&lt;NoteContainer&gt;</code> component receives the <code>notes</code> data in its <code>props</code>. A child component is not allowed to make changes to the <code>props</code>, since the data belongs to the parent component.</li>
</ul>
<p>This means in the child <code>&lt;NoteContainer&gt;</code> component, the line</p>
<pre class="language-javascript"><code class="language-javascript">        <span class="token operator">&lt;</span>NoteSelectors notes<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>notes<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></code></pre>
<p>is taking the <code>this.props.notes</code> data it received from its parent and passing it to the child <code>&lt;NoteSelectors&gt;</code> component as new <code>props</code> with a key of <code>notes</code>.</p>
<p>Finally, we get to <code>&lt;NoteSelectors&gt;</code> component, which does actually use the notes. This is what the code in <strong><code>src/components/NoteSelectors.js</code></strong> looks like:</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> NoteSelector <span class="token keyword">from</span> <span class="token string">"./NoteSelector"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">class</span> <span class="token class-name">NoteSelectors</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><ins class="highlight-line highlight-line-add">    <span class="token keyword">const</span> noteSelectors <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>notes<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">note</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span></ins><br><ins class="highlight-line highlight-line-add">      <span class="token operator">&lt;</span>NoteSelector </ins><br><ins class="highlight-line highlight-line-add">        key<span class="token operator">=</span><span class="token punctuation">{</span>note<span class="token punctuation">.</span>id<span class="token punctuation">}</span></ins><br><ins class="highlight-line highlight-line-add">        body<span class="token operator">=</span><span class="token punctuation">{</span>note<span class="token punctuation">.</span>body<span class="token punctuation">}</span></ins><br><ins class="highlight-line highlight-line-add">        timestamp<span class="token operator">=</span><span class="token punctuation">{</span>note<span class="token punctuation">.</span>timestamp<span class="token punctuation">}</span></ins><br><ins class="highlight-line highlight-line-add">      <span class="token operator">/</span><span class="token operator">></span></ins><br><ins class="highlight-line highlight-line-add">    <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></ins><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"note-selectors"</span><span class="token operator">></span></span><br><span class="highlight-line">        <span class="token punctuation">{</span>noteSelectors<span class="token punctuation">}</span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> NoteSelectors<span class="token punctuation">;</span></span></code></pre>
<p>React doesn’t provide a special mechanism to loop through data — instead we’re using the built-in array <code>map</code> function to create an array of <code>&lt;NoteSelector&gt;</code> components, stored in the variable <code>noteSelectors</code> and rendered in the JSX. Finally, the <code>&lt;NoteSelector&gt;</code> component renders the data bound to its props, as you can see in <strong><code>src/components/NoteSelector.js</code></strong>:</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">class</span> <span class="token class-name">NoteSelector</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"note-selector"</span><span class="token operator">></span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token string">"note-selector-title"</span><span class="token operator">></span></span><br><ins class="highlight-line highlight-line-add">          <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>body<span class="token punctuation">}</span></ins><br><span class="highlight-line">        <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token string">"note-selector-timestamp"</span><span class="token operator">></span></span><br><ins class="highlight-line highlight-line-add">          <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>timestamp<span class="token punctuation">}</span></ins><br><span class="highlight-line">        <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> NoteSelector<span class="token punctuation">;</span></span></code></pre>
<p>For now, I’m using the note’s body and raw timestamp as placeholders, we’ll look at formatting them next.</p>
<h3 id="use-functions-to-sort-and-format-notes">Use functions to sort and format notes <a class="direct-link" href="#use-functions-to-sort-and-format-notes">#</a></h3>
<p>Unlike Vue.js, React doesn’t provide special mechanisms for things like computed properties and filters. Instead, you simply write functions as needed. This is what the <strong><code>src/components/NoteSelector.js</code></strong> code looks like with text formatting:</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><ins class="highlight-line highlight-line-add"><span class="token keyword">function</span> <span class="token function">formatTitle</span><span class="token punctuation">(</span><span class="token parameter">body</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></ins><br><ins class="highlight-line highlight-line-add">  <span class="token keyword">var</span> maxLength <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span></ins><br><ins class="highlight-line highlight-line-add">  <span class="token keyword">if</span> <span class="token punctuation">(</span>body<span class="token punctuation">.</span>length <span class="token operator">></span> maxLength<span class="token punctuation">)</span> <span class="token punctuation">{</span></ins><br><ins class="highlight-line highlight-line-add">    <span class="token keyword">return</span> body<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> maxLength <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"..."</span><span class="token punctuation">;</span></ins><br><ins class="highlight-line highlight-line-add">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>body<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></ins><br><ins class="highlight-line highlight-line-add">    <span class="token keyword">return</span> <span class="token string">"New note"</span><span class="token punctuation">;</span></ins><br><ins class="highlight-line highlight-line-add">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></ins><br><ins class="highlight-line highlight-line-add">    <span class="token keyword">return</span> body<span class="token punctuation">;</span></ins><br><ins class="highlight-line highlight-line-add">  <span class="token punctuation">}</span></ins><br><ins class="highlight-line highlight-line-add"><span class="token punctuation">}</span></ins><br><ins class="highlight-line highlight-line-add"></ins><br><ins class="highlight-line highlight-line-add"><span class="token keyword">function</span> <span class="token function">formatTimestamp</span><span class="token punctuation">(</span><span class="token parameter">timestamp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></ins><br><ins class="highlight-line highlight-line-add">  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>timestamp<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUTCString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></ins><br><ins class="highlight-line highlight-line-add"><span class="token punctuation">}</span></ins><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">class</span> <span class="token class-name">NoteSelector</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"note-selector"</span><span class="token operator">></span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token string">"note-selector-title"</span><span class="token operator">></span></span><br><ins class="highlight-line highlight-line-add">          <span class="token punctuation">{</span><span class="token function">formatTitle</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">}</span></ins><br><span class="highlight-line">        <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token string">"note-selector-timestamp"</span><span class="token operator">></span></span><br><ins class="highlight-line highlight-line-add">          <span class="token punctuation">{</span><span class="token function">formatTimestamp</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>timestamp<span class="token punctuation">)</span><span class="token punctuation">}</span></ins><br><span class="highlight-line">        <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> NoteSelector<span class="token punctuation">;</span></span></code></pre>
<p>Similarly, this is what the <strong><code>src/components/NoteSelectors.js</code></strong> code looks like to sort the child <code>&lt;NoteSelector&gt;</code> components by timestamps:</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> NoteSelector <span class="token keyword">from</span> <span class="token string">"./NoteSelector"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">class</span> <span class="token class-name">NoteSelectors</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><ins class="highlight-line highlight-line-add">    <span class="token keyword">const</span> sortedNotes <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>notes<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=></span> </ins><br><ins class="highlight-line highlight-line-add">      b<span class="token punctuation">.</span>timestamp <span class="token operator">-</span> a<span class="token punctuation">.</span>timestamp</ins><br><ins class="highlight-line highlight-line-add">    <span class="token punctuation">)</span><span class="token punctuation">;</span></ins><br><ins class="highlight-line highlight-line-add">    <span class="token keyword">const</span> noteSelectors <span class="token operator">=</span> sortedNotes<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">note</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span></ins><br><span class="highlight-line">      <span class="token operator">&lt;</span>NoteSelector</span><br><span class="highlight-line">        key<span class="token operator">=</span><span class="token punctuation">{</span>note<span class="token punctuation">.</span>id<span class="token punctuation">}</span></span><br><span class="highlight-line">        body<span class="token operator">=</span><span class="token punctuation">{</span>note<span class="token punctuation">.</span>body<span class="token punctuation">}</span></span><br><span class="highlight-line">        timestamp<span class="token operator">=</span><span class="token punctuation">{</span>note<span class="token punctuation">.</span>timestamp<span class="token punctuation">}</span></span><br><span class="highlight-line">      <span class="token operator">/</span><span class="token operator">></span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"note-selectors"</span><span class="token operator">></span></span><br><span class="highlight-line">        <span class="token punctuation">{</span>noteSelectors<span class="token punctuation">}</span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> NoteSelectors<span class="token punctuation">;</span></span></code></pre>
<p>This is one of the promises of React as a framework — it tries to keep its API to a minimum, relying on vanilla JavaScript whenever possible to implement features.</p>
<h3 id="select-a-note-on-title-click">Select a note on title click <a class="direct-link" href="#select-a-note-on-title-click">#</a></h3>
<p>Now let’s implement the ability to actually select notes. Clicking on a note title should both highlight the selected note on the left as well as display the contents in the editor on the right. First we’ll change the template in <strong><code>src/App.js</code></strong> as follows:</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> Toolbar <span class="token keyword">from</span> <span class="token string">"./components/Toolbar"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> NoteContainer <span class="token keyword">from</span> <span class="token string">"./components/NoteContainer"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token string">"./App.css"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      notes<span class="token operator">:</span> <span class="token punctuation">[</span></span><br><span class="highlight-line">        <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> body<span class="token operator">:</span> <span class="token string">"This is a first test"</span><span class="token punctuation">,</span> timestamp<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> body<span class="token operator">:</span> <span class="token string">"This is a second test"</span><span class="token punctuation">,</span> timestamp<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> body<span class="token operator">:</span> <span class="token string">"This is a third test"</span><span class="token punctuation">,</span> timestamp<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">]</span><span class="token punctuation">,</span></span><br><ins class="highlight-line highlight-line-add">      selectedNoteId<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></ins><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><ins class="highlight-line highlight-line-add">  <span class="token function-variable function">handleClickNote</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></ins><br><ins class="highlight-line highlight-line-add">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> selectedNoteId<span class="token operator">:</span> id <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></ins><br><ins class="highlight-line highlight-line-add">  <span class="token punctuation">}</span><span class="token punctuation">;</span></ins><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">></span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span>Toolbar <span class="token operator">/</span><span class="token operator">></span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span>NoteContainer</span><br><span class="highlight-line">          notes<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>notes<span class="token punctuation">}</span></span><br><ins class="highlight-line highlight-line-add">          selectedNoteId<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>selectedNoteId<span class="token punctuation">}</span></ins><br><ins class="highlight-line highlight-line-add">          onClickNote<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClickNote<span class="token punctuation">}</span></ins><br><span class="highlight-line">        <span class="token operator">/</span><span class="token operator">></span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span></span></code></pre>
<p>Let’s go over these changes one at a time:</p>
<ul>
<li>We are adding <code>selectedNoteId</code> to the state to keep track of which note was selected. This is different than Vue.js, where we kept track of the note itself instead of just the id. This works better with the way React handles changes to the state, which we’ll see next.</li>
<li>We are defining a new <code>handleClickNote</code> function which takes an id and updates the state using React’s <code>setState</code> method. This is an important part of React — you must use this <code>setState</code> method to change any state, without it React won’t be able to properly update the DOM when state changes. (Note the weird way I’m defining the <code>handleClickNote</code> method in the class — <a href="https://babeljs.io/docs/plugins/transform-class-properties/">this syntax</a> helps properly bind the right <code>this</code> to the method in an efficient way. You can read more about it and other approaches <a href="https://facebook.github.io/react/docs/handling-events.html">here</a>).</li>
<li>We are binding a new prop to the child <code>&lt;NoteContainer&gt;</code> component called <code>selectedNoteId</code>, which is set to the current component’s state’s <code>selectedNoteId</code>.</li>
<li>We are binding another new prop to the child <code>&lt;NoteContainer&gt;</code> component called <code>onClickNote</code>, which is set to the current component’s <code>handleClickNote</code> method we defined earlier. This is also different from Vue.js — there is no special notion of event emitters and listeners in React, you simply pass functions as part of the regular <code>props</code> which the child will call when appropriate.</li>
</ul>
<p>Note the naming convention here — the actual event handler is named <code>handleClickNote</code>, the event handler as passed through in props is named <code>onClickNote</code>. This makes it easier to keep track of where event handlers are coming from, which we can see more clearly as we follow the <code>props</code> into the child components. The code in <strong><code>src/components/NoteContainer.js</code></strong> looks like:</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> NoteSelectors <span class="token keyword">from</span> <span class="token string">"./NoteSelectors"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> NoteEditor <span class="token keyword">from</span> <span class="token string">"./NoteEditor"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">class</span> <span class="token class-name">NoteContainer</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"note-container"</span><span class="token operator">></span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span>NoteSelectors</span><br><span class="highlight-line">          notes<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>notes<span class="token punctuation">}</span></span><br><ins class="highlight-line highlight-line-add">          selectedNoteId<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>selectedNoteId<span class="token punctuation">}</span></ins><br><ins class="highlight-line highlight-line-add">          onClickNote<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>onClickNote<span class="token punctuation">}</span></ins><br><span class="highlight-line">        <span class="token operator">/</span><span class="token operator">></span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span>NoteEditor <span class="token operator">/</span><span class="token operator">></span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> NoteContainer<span class="token punctuation">;</span></span></code></pre>
<p>Right now this component is only passing the <code>props</code> further into the <code>&lt;NoteSelectors&gt;</code> component. The code in <strong><code>src/components/NoteSelectors.js</code></strong> looks like:</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> NoteSelector <span class="token keyword">from</span> <span class="token string">"./NoteSelector"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">class</span> <span class="token class-name">NoteSelectors</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> sortedNotes <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>notes<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=></span> b<span class="token punctuation">.</span>timestamp <span class="token operator">-</span> a<span class="token punctuation">.</span>timestamp<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> noteSelectors <span class="token operator">=</span> sortedNotes<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">note</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span>NoteSelector</span><br><span class="highlight-line">        key<span class="token operator">=</span><span class="token punctuation">{</span>note<span class="token punctuation">.</span>id<span class="token punctuation">}</span></span><br><span class="highlight-line">        body<span class="token operator">=</span><span class="token punctuation">{</span>note<span class="token punctuation">.</span>body<span class="token punctuation">}</span></span><br><span class="highlight-line">        timestamp<span class="token operator">=</span><span class="token punctuation">{</span>note<span class="token punctuation">.</span>timestamp<span class="token punctuation">}</span></span><br><ins class="highlight-line highlight-line-add">        id<span class="token operator">=</span><span class="token punctuation">{</span>note<span class="token punctuation">.</span>id<span class="token punctuation">}</span></ins><br><ins class="highlight-line highlight-line-add">        selectedNoteId<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>selectedNoteId<span class="token punctuation">}</span></ins><br><ins class="highlight-line highlight-line-add">        onClickNote<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>onClickNote<span class="token punctuation">}</span></ins><br><span class="highlight-line">      <span class="token operator">/</span><span class="token operator">></span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"note-selectors"</span><span class="token operator">></span><span class="token punctuation">{</span>noteSelectors<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> NoteSelectors<span class="token punctuation">;</span></span></code></pre>
<p>Again, this component is only passing the <code>props</code> further into the <code>&lt;NoteSelector&gt;</code> component. Note that it’s also adding one more prop for the note id, which will be useful in a moment. Finally, we’ll see how the <code>props</code> get used in <strong><code>src/components/NoteSelector.js</code></strong>:</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">function</span> <span class="token function">formatTitle</span><span class="token punctuation">(</span><span class="token parameter">body</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">var</span> maxLength <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>body<span class="token punctuation">.</span>length <span class="token operator">></span> maxLength<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> body<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> maxLength <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"..."</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>body<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token string">"New note"</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> body<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">function</span> <span class="token function">formatTimestamp</span><span class="token punctuation">(</span><span class="token parameter">timestamp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>timestamp<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUTCString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">class</span> <span class="token class-name">NoteSelector</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span><br><ins class="highlight-line highlight-line-add">  <span class="token function-variable function">handleClickNote</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></ins><br><ins class="highlight-line highlight-line-add">    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">onClickNote</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span></ins><br><ins class="highlight-line highlight-line-add">  <span class="token punctuation">}</span><span class="token punctuation">;</span></ins><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span>div</span><br><ins class="highlight-line highlight-line-add">        className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">"note-selector "</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>id <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>selectedNoteId <span class="token operator">?</span> <span class="token string">"active"</span> <span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">}</span></ins><br><ins class="highlight-line highlight-line-add">        onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClickNote<span class="token punctuation">}</span></ins><br><span class="highlight-line">      <span class="token operator">></span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token string">"note-selector-title"</span><span class="token operator">></span></span><br><span class="highlight-line">          <span class="token punctuation">{</span><span class="token function">formatTitle</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">}</span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token string">"note-selector-timestamp"</span><span class="token operator">></span></span><br><span class="highlight-line">          <span class="token punctuation">{</span><span class="token function">formatTimestamp</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>timestamp<span class="token punctuation">)</span><span class="token punctuation">}</span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> NoteSelector<span class="token punctuation">;</span></span></code></pre>
<p>There are three essential things happening here:</p>
<ul>
<li>The code <code>onClick={this.handleClickNote}</code> is capturing the DOM’s click handler and binding it to the current component’s <code>handleClickNote</code> method.</li>
<li>The <code>handleClickNote</code> method is defined to simply call the function <code>onClickNote</code> that was passed in from the <code>props</code>. Recall that this was defined in the <code>&lt;App&gt;</code> component to update the state of the <code>selectedNoteId</code>. Once the state is updated, React will automatically re-render all the children components.</li>
<li>The code <code>className={&quot;note-selector &quot; + (this.props.id === this.props.selectedNoteId ? 'active' : '')}</code> is using a JavaScript ternary operator to conditionally add the <code>.active</code> class to the div if the note is the selected note. Again, there isn’t any special syntax like Vue.js’ <code>v-bind</code> to apply this class name, you’re just using built in JavaScript tools.</li>
</ul>
<p>This is React’s way of managing components (props down, events up), which helps keep the architecture of the code clean and avoids jQuery spaghetti that we saw a bit of <a href="comparing-frontend-approaches-part-2-jquery.html">earlier</a>. It’s a bit different than Vue.js’ component model — in Vue.js, each component can only pass emit and listen to events from its direct child and direct parent. In React, you don’t emit events, instead you pass functions (which can belong to any component) in <code>props</code>, which means the function can be called by a child, grandchild, etc. In this case the <code>&lt;NoteSelector&gt;</code> component is essentially the great-great-grandchild of the <code>&lt;App&gt;</code> component, but it is able to call the <code>onClickNote</code> prop which is directly connected to the <code>&lt;App&gt;</code> component. In Vue.js you would have to bubble up the event one component at a time.</p>
<h3 id="edit-the-selected-note-on-editor-input">Edit the selected note on editor input <a class="direct-link" href="#edit-the-selected-note-on-editor-input">#</a></h3>
<p>At this point we can select a note and it highlights accordingly, but the content of the selected note aren’t showing up in the <code>&lt;NoteEditor&gt;</code> component. We also need to be able to update the selected note as the user enters text in the editor. Here’s how the code would change in <strong><code>src/App.js</code></strong>:</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> Toolbar <span class="token keyword">from</span> <span class="token string">'./components/Toolbar'</span></span><br><span class="highlight-line"><span class="token keyword">import</span> NoteContainer <span class="token keyword">from</span> <span class="token string">'./components/NoteContainer'</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token string">'./App.css'</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      notes<span class="token operator">:</span> <span class="token punctuation">[</span></span><br><span class="highlight-line">        <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> body<span class="token operator">:</span> <span class="token string">"This is a first test"</span><span class="token punctuation">,</span> timestamp<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> body<span class="token operator">:</span> <span class="token string">"This is a second test"</span><span class="token punctuation">,</span> timestamp<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> body<span class="token operator">:</span> <span class="token string">"This is a third test"</span><span class="token punctuation">,</span> timestamp<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><br><span class="highlight-line">      <span class="token punctuation">]</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      selectedNoteId<span class="token operator">:</span> <span class="token number">1</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function-variable function">handleClickNote</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>selectedNoteId<span class="token operator">:</span> id<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><ins class="highlight-line highlight-line-add">  <span class="token function-variable function">handleNoteEditorChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></ins><br><ins class="highlight-line highlight-line-add">    <span class="token keyword">const</span> newNotes <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>notes<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">note</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></ins><br><ins class="highlight-line highlight-line-add">      <span class="token keyword">if</span> <span class="token punctuation">(</span>note<span class="token punctuation">.</span>id <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>selectedNoteId<span class="token punctuation">)</span> <span class="token punctuation">{</span></ins><br><ins class="highlight-line highlight-line-add">        <span class="token keyword">return</span> <span class="token punctuation">{</span></ins><br><ins class="highlight-line highlight-line-add">          id<span class="token operator">:</span> note<span class="token punctuation">.</span>id<span class="token punctuation">,</span></ins><br><ins class="highlight-line highlight-line-add">          body<span class="token operator">:</span> text<span class="token punctuation">,</span></ins><br><ins class="highlight-line highlight-line-add">          timestamp<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span></ins><br><ins class="highlight-line highlight-line-add">        <span class="token punctuation">}</span><span class="token punctuation">;</span></ins><br><ins class="highlight-line highlight-line-add">      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></ins><br><ins class="highlight-line highlight-line-add">        <span class="token keyword">return</span> note<span class="token punctuation">;</span></ins><br><ins class="highlight-line highlight-line-add">      <span class="token punctuation">}</span></ins><br><ins class="highlight-line highlight-line-add">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></ins><br><ins class="highlight-line highlight-line-add">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>notes<span class="token operator">:</span> newNotes<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></ins><br><ins class="highlight-line highlight-line-add">  <span class="token punctuation">}</span></ins><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">></span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span>Toolbar <span class="token operator">/</span><span class="token operator">></span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span>NoteContainer</span><br><span class="highlight-line">          notes<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>notes<span class="token punctuation">}</span></span><br><span class="highlight-line">          selectedNoteId<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>selectedNoteId<span class="token punctuation">}</span></span><br><span class="highlight-line">          onClickNote<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClickNote<span class="token punctuation">}</span></span><br><ins class="highlight-line highlight-line-add">          onNoteEditorChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleNoteEditorChange<span class="token punctuation">}</span></ins><br><span class="highlight-line">        <span class="token operator">/</span><span class="token operator">></span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>      </span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span></span></code></pre>
<p>The <code>handleNoteEditorChange</code> is a method that updates the selected note’s body with the given text. The thing that makes it tricky is that React requires you to not directly mutate the <code>state</code> object; instead, you should create a new copy of the part of the state that’s changing and update it using the <code>setState</code> function. Here we’re using the built-in array <code>map</code> function to create a new copy of the notes, where each note remains unchanged except for the current selected note, which gets recreated with the new body and timestamp.</p>
<p>In the render function, we’re passing the <code>handleNoteEditorChange</code> method the <code>&lt;NoteContainer&gt;</code> component as a prop named <code>onNoteEditorChange</code>. To use the method, the code in <strong><code>src/components/NoteContainer.js</code></strong> would change as follows:</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> NoteSelectors <span class="token keyword">from</span> <span class="token string">'./NoteSelectors'</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> NoteEditor <span class="token keyword">from</span> <span class="token string">'./NoteEditor'</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">class</span> <span class="token class-name">NoteContainer</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><ins class="highlight-line highlight-line-add">    <span class="token keyword">const</span> selectedNote <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>notes<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">note</span> <span class="token operator">=></span></ins><br><ins class="highlight-line highlight-line-add">      note<span class="token punctuation">.</span>id <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>selectedNoteId</ins><br><ins class="highlight-line highlight-line-add">    <span class="token punctuation">)</span><span class="token punctuation">;</span></ins><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"note-container"</span><span class="token operator">></span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span>NoteSelectors</span><br><span class="highlight-line">          notes<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>notes<span class="token punctuation">}</span></span><br><span class="highlight-line">          selectedNoteId<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>selectedNoteId<span class="token punctuation">}</span></span><br><span class="highlight-line">          onClickNote<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>onClickNote<span class="token punctuation">}</span></span><br><span class="highlight-line">        <span class="token operator">/</span><span class="token operator">></span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span>NoteEditor</span><br><ins class="highlight-line highlight-line-add">          selectedNote<span class="token operator">=</span><span class="token punctuation">{</span>selectedNote<span class="token punctuation">}</span></ins><br><ins class="highlight-line highlight-line-add">          onNoteEditorChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>onNoteEditorChange<span class="token punctuation">}</span></ins><br><span class="highlight-line">        <span class="token operator">/</span><span class="token operator">></span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> NoteContainer<span class="token punctuation">;</span></span></code></pre>
<p>First we’re creating a variable called <code>selectedNote</code>, which we have to find from the given <code>notes</code> and <code>selectedNoteId</code> in <code>props</code>. Then we can bind the <code>selectedNote</code> to the <code>&lt;NoteEditor&gt;</code> props, along with the given <code>onNoteEditorChange</code> function. (Note that we have to find the <code>selectedNote</code> here as opposed to inside the <code>&lt;NoteEditor&gt;</code> component, because this component has access to both the <code>notes</code> and the <code>selectedNoteId</code>, whereas the <code>&lt;NoteEditor&gt;</code> doesn’t have access to the <code>notes</code> data).</p>
<p>Finally, we can see how the <code>&lt;NoteEditor&gt;</code> component will use the <code>props</code> in <strong><code>src/components/NoteEditor.js</code></strong>:</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><ins class="highlight-line highlight-line-add"><span class="token keyword">function</span> <span class="token function">formatTimestamp</span><span class="token punctuation">(</span><span class="token parameter">timestamp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></ins><br><ins class="highlight-line highlight-line-add">  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>timestamp<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUTCString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></ins><br><ins class="highlight-line highlight-line-add"><span class="token punctuation">}</span></ins><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">class</span> <span class="token class-name">NoteEditor</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span><br><ins class="highlight-line highlight-line-add">  <span class="token function-variable function">handleChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></ins><br><ins class="highlight-line highlight-line-add">    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">onNoteEditorChange</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span></ins><br><ins class="highlight-line highlight-line-add">  <span class="token punctuation">}</span></ins><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"note-editor"</span><span class="token operator">></span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token string">"note-editor-info"</span><span class="token operator">></span></span><br><ins class="highlight-line highlight-line-add">          <span class="token punctuation">{</span><span class="token function">formatTimestamp</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>selectedNote<span class="token punctuation">.</span>timestamp<span class="token punctuation">)</span><span class="token punctuation">}</span></ins><br><span class="highlight-line">        <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span>textarea className<span class="token operator">=</span><span class="token string">"note-editor-input"</span></span><br><ins class="highlight-line highlight-line-add">          value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>selectedNote<span class="token punctuation">.</span>body<span class="token punctuation">}</span></ins><br><ins class="highlight-line highlight-line-add">          onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span></ins><br><span class="highlight-line">        <span class="token operator">/</span><span class="token operator">></span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> NoteEditor<span class="token punctuation">;</span></span></code></pre>
<p>Let’s go over what’s going on here one at a time:</p>
<ul>
<li>We need to define a <code>formatTimestamp</code> function to format the editor’s timestamp. It’s the same as the function defined in the <code>&lt;NoteSelector&gt;</code> component, so we’ll need to find a way to DRY it up (in the next section).</li>
<li>The <code>handleChange</code> method is going to be triggered from a DOM input event, and it will simply call up the <code>onNoteEditorChange</code> method that was given in the <code>props</code> (first extracting out the user’s text from the event).</li>
<li>The <code>render</code> method displays the <code>selectedNote’s</code> timestamp and body, as well as bind’s the DOM’s <code>&lt;textarea&gt;</code> input event to run the <code>handleChange</code> method defined above.</li>
</ul>
<p>Again, the flow would be the user enters text in the <code>&lt;NoteEditor&gt;</code> component, which triggers its <code>handleChange</code> method, which runs the <code>onNoteEditorChange</code> method from its props, which all the way in the <code>&lt;App&gt;</code> component updates the <code>notes</code> in its <code>state</code> object, causing all the children to be re-rendered.</p>
<h3 id="refactor-helper-functions-to-separate-file">Refactor helper functions to separate file <a class="direct-link" href="#refactor-helper-functions-to-separate-file">#</a></h3>
<p>Right now we have an issue where we defined the same <code>formatTimestamp</code> function in two different components. Again, React doesn’t provide a React-specific way to handle this issue — you can use regular JavaScript to DRY up the code. In this case we’re going to write the helpers in a separate file, then import them as needed (which is not traditional JavaScript per se, but we’ve been using imports repeatedly throughout the code, so it shouldn’t be that hard). Here’s the new helper file in <strong><code>src/helpers.js</code></strong>:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">formatTitle</span><span class="token punctuation">(</span><span class="token parameter">body</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">var</span> maxLength <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>body<span class="token punctuation">.</span>length <span class="token operator">></span> maxLength<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> body<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> maxLength <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"..."</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>body<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token string">"New note"</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> body<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">formatTimestamp</span><span class="token punctuation">(</span><span class="token parameter">timestamp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>timestamp<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUTCString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>And here’s how you would import the functions in <strong><code>src/components/NoteSelector.js</code></strong>:</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span></span><br><ins class="highlight-line highlight-line-add"><span class="token keyword">import</span> <span class="token punctuation">{</span>formatTitle<span class="token punctuation">,</span> formatTimestamp<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../helpers'</span><span class="token punctuation">;</span></ins><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">class</span> <span class="token class-name">NoteSelector</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token function-variable function">handleClickNote</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">onClickNote</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span>div</span><br><span class="highlight-line">        className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">"note-selector "</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>id <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>selectedNoteId <span class="token operator">?</span> <span class="token string">'active'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><br><span class="highlight-line">        onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClickNote<span class="token punctuation">}</span></span><br><span class="highlight-line">      <span class="token operator">></span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token string">"note-selector-title"</span><span class="token operator">></span></span><br><span class="highlight-line">          <span class="token punctuation">{</span><span class="token function">formatTitle</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">}</span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token string">"note-selector-timestamp"</span><span class="token operator">></span></span><br><span class="highlight-line">          <span class="token punctuation">{</span><span class="token function">formatTimestamp</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>timestamp<span class="token punctuation">)</span><span class="token punctuation">}</span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> NoteSelector<span class="token punctuation">;</span></span></code></pre>
<p>You would do the same in <code>src/components/NoteEditor.js</code> to import the <code>formatTimestamp</code> function. This is an easy enough structure to put any helper functions in an organized spot going forward!</p>
<h3 id="create-a-new-note-with-a-button">Create a new note with a button <a class="direct-link" href="#create-a-new-note-with-a-button">#</a></h3>
<p>Now let’s implement the ability to create a new note. Clicking on the “New” button should create a new note (new id, no body, current timestamp). The new note should become the currently selected note and appear at the top of the list of note selectors. Let’s start with the child <code>&lt;Toolbar&gt;</code> component in <strong><code>src/components/Toolbar.js</code></strong>:</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">class</span> <span class="token class-name">Toolbar</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"toolbar"</span><span class="token operator">></span></span><br><ins class="highlight-line highlight-line-add">        <span class="token operator">&lt;</span>button className<span class="token operator">=</span><span class="token string">"toolbar-button"</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>onNewNote<span class="token punctuation">}</span><span class="token operator">></span></ins><br><span class="highlight-line">          New</span><br><span class="highlight-line">        <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span>button className<span class="token operator">=</span><span class="token string">"toolbar-button"</span><span class="token operator">></span></span><br><span class="highlight-line">          Delete</span><br><span class="highlight-line">        <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span>input className<span class="token operator">=</span><span class="token string">"toolbar-search"</span> type<span class="token operator">=</span><span class="token string">"text"</span> placeholder<span class="token operator">=</span><span class="token string">"Search..."</span> <span class="token operator">/</span><span class="token operator">></span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> Toolbar<span class="token punctuation">;</span></span></code></pre>
<p>Here the code <code>onClick={this.props.onNewNote}</code> is capturing the native DOM <code>&lt;button&gt;</code> click event with <code>onClick</code>, which will run the <code>onNewNote</code> method from the <code>props</code> when the event fires. This means the parent <code>&lt;App&gt;</code> component must send down the <code>onNewNote</code> method in <code>props</code> appropriately, which would change the code in <strong><code>src/App.js</code></strong> as follows:</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> Toolbar <span class="token keyword">from</span> <span class="token string">"./components/Toolbar"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> NoteContainer <span class="token keyword">from</span> <span class="token string">"./components/NoteContainer"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token string">"./App.css"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      notes<span class="token operator">:</span> <span class="token punctuation">[</span></span><br><span class="highlight-line">        <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> body<span class="token operator">:</span> <span class="token string">"This is a first test"</span><span class="token punctuation">,</span> timestamp<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> body<span class="token operator">:</span> <span class="token string">"This is a second test"</span><span class="token punctuation">,</span> timestamp<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> body<span class="token operator">:</span> <span class="token string">"This is a third test"</span><span class="token punctuation">,</span> timestamp<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">]</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      selectedNoteId<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function-variable function">handleClickNote</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> selectedNoteId<span class="token operator">:</span> id <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function-variable function">handleNoteEditorChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> newNotes <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>notes<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">note</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>note<span class="token punctuation">.</span>id <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>selectedNoteId<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          id<span class="token operator">:</span> note<span class="token punctuation">.</span>id<span class="token punctuation">,</span></span><br><span class="highlight-line">          body<span class="token operator">:</span> text<span class="token punctuation">,</span></span><br><span class="highlight-line">          timestamp<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> note<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> notes<span class="token operator">:</span> newNotes <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><ins class="highlight-line highlight-line-add">  <span class="token function-variable function">handleNewNote</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></ins><br><ins class="highlight-line highlight-line-add">    <span class="token keyword">const</span> newNote <span class="token operator">=</span> <span class="token punctuation">{</span></ins><br><ins class="highlight-line highlight-line-add">      id<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></ins><br><ins class="highlight-line highlight-line-add">      body<span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span></ins><br><ins class="highlight-line highlight-line-add">      timestamp<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></ins><br><ins class="highlight-line highlight-line-add">    <span class="token punctuation">}</span><span class="token punctuation">;</span></ins><br><ins class="highlight-line highlight-line-add">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span></ins><br><ins class="highlight-line highlight-line-add">      notes<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>notes<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span>newNote<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span></ins><br><ins class="highlight-line highlight-line-add">      selectedNoteId<span class="token operator">:</span> newNote<span class="token punctuation">.</span>id<span class="token punctuation">,</span></ins><br><ins class="highlight-line highlight-line-add">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></ins><br><ins class="highlight-line highlight-line-add">  <span class="token punctuation">}</span><span class="token punctuation">;</span></ins><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">></span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span>Toolbar</span><br><ins class="highlight-line highlight-line-add">          onNewNote<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleNewNote<span class="token punctuation">}</span></ins><br><span class="highlight-line">        <span class="token operator">/</span><span class="token operator">></span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span>NoteContainer</span><br><span class="highlight-line">          notes<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>notes<span class="token punctuation">}</span></span><br><span class="highlight-line">          selectedNoteId<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>selectedNoteId<span class="token punctuation">}</span></span><br><span class="highlight-line">          onClickNote<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClickNote<span class="token punctuation">}</span></span><br><span class="highlight-line">          onNoteEditorChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleNoteEditorChange<span class="token punctuation">}</span></span><br><span class="highlight-line">        <span class="token operator">/</span><span class="token operator">></span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span></span></code></pre>
<p>Here the <code>&lt;Toolbar&gt;</code> component is sending the <code>handleNewNote</code> method as a prop called <code>onNewNote</code> (which we defined earlier to run whenever the “New” button in the toolbar is clicked). The <code>handleNewNote</code> method has to update the state with a new note as well as a new selected note id, which again requires care to avoid direct mutation. Here we’re creating a new copy of the <code>notes</code> array by using the array <code>concat</code> method. Once the state is updated with <code>setState</code>, React will automatically re-render the child components as needed.</p>
<h3 id="delete-the-selected-note-with-a-button">Delete the selected note with a button <a class="direct-link" href="#delete-the-selected-note-with-a-button">#</a></h3>
<p>Wiring up this feature starts off pretty similar to the new note feature. Let’s again start with the child <code>&lt;Toolbar&gt;</code> component in <strong><code>src/components/Toolbar.js</code></strong>:</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">class</span> <span class="token class-name">Toolbar</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"toolbar"</span><span class="token operator">></span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span>button className<span class="token operator">=</span><span class="token string">"toolbar-button"</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>onNewNote<span class="token punctuation">}</span><span class="token operator">></span></span><br><span class="highlight-line">          New</span><br><span class="highlight-line">        <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></span><br><ins class="highlight-line highlight-line-add">        <span class="token operator">&lt;</span>button className<span class="token operator">=</span><span class="token string">"toolbar-button"</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>onDeleteNote<span class="token punctuation">}</span><span class="token operator">></span></ins><br><span class="highlight-line">          Delete</span><br><span class="highlight-line">        <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span>input className<span class="token operator">=</span><span class="token string">"toolbar-search"</span> type<span class="token operator">=</span><span class="token string">"text"</span> placeholder<span class="token operator">=</span><span class="token string">"Search..."</span> <span class="token operator">/</span><span class="token operator">></span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> Toolbar<span class="token punctuation">;</span></span></code></pre>
<p>Here the code <code>onClick={this.props.onDeleteNote}</code> is capturing the native DOM <code>&lt;button&gt;</code> click event and running the <code>onDeleteNote</code> method from the <code>props</code>. This means the parent <code>&lt;App&gt;</code> component must send down the <code>props</code> appropriately, which would change the code in <strong><code>src/App.js</code></strong> as follows:</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> Toolbar <span class="token keyword">from</span> <span class="token string">"./components/Toolbar"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> NoteContainer <span class="token keyword">from</span> <span class="token string">"./components/NoteContainer"</span><span class="token punctuation">;</span></span><br><ins class="highlight-line highlight-line-add"><span class="token keyword">import</span> <span class="token punctuation">{</span> transformNotes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./helpers"</span><span class="token punctuation">;</span></ins><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token string">"./App.css"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      notes<span class="token operator">:</span> <span class="token punctuation">[</span></span><br><span class="highlight-line">        <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> body<span class="token operator">:</span> <span class="token string">"This is a first test"</span><span class="token punctuation">,</span> timestamp<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> body<span class="token operator">:</span> <span class="token string">"This is a second test"</span><span class="token punctuation">,</span> timestamp<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> body<span class="token operator">:</span> <span class="token string">"This is a third test"</span><span class="token punctuation">,</span> timestamp<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">]</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      selectedNoteId<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function-variable function">handleClickNote</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> selectedNoteId<span class="token operator">:</span> id <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function-variable function">handleNoteEditorChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> newNotes <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>notes<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">note</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>note<span class="token punctuation">.</span>id <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>selectedNoteId<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          id<span class="token operator">:</span> note<span class="token punctuation">.</span>id<span class="token punctuation">,</span></span><br><span class="highlight-line">          body<span class="token operator">:</span> text<span class="token punctuation">,</span></span><br><span class="highlight-line">          timestamp<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> note<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> notes<span class="token operator">:</span> newNotes <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function-variable function">handleNewNote</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> newNote <span class="token operator">=</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      id<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      body<span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      timestamp<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">      notes<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>notes<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span>newNote<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      selectedNoteId<span class="token operator">:</span> newNote<span class="token punctuation">.</span>id<span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><ins class="highlight-line highlight-line-add">  <span class="token function-variable function">handleDeleteNote</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></ins><br><ins class="highlight-line highlight-line-add">    <span class="token keyword">const</span> newNotes <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>notes<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">note</span><span class="token punctuation">)</span> <span class="token operator">=></span> note<span class="token punctuation">.</span>id <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>selectedNoteId<span class="token punctuation">)</span><span class="token punctuation">;</span></ins><br><ins class="highlight-line highlight-line-add">    <span class="token keyword">const</span> transformedNotes <span class="token operator">=</span> <span class="token function">transformNotes</span><span class="token punctuation">(</span>newNotes<span class="token punctuation">)</span><span class="token punctuation">;</span></ins><br><ins class="highlight-line highlight-line-add">    <span class="token keyword">const</span> newSelectedNoteId <span class="token operator">=</span> transformedNotes<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">?</span> transformedNotes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>id <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span></ins><br><ins class="highlight-line highlight-line-add">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span></ins><br><ins class="highlight-line highlight-line-add">      notes<span class="token operator">:</span> newNotes<span class="token punctuation">,</span></ins><br><ins class="highlight-line highlight-line-add">      selectedNoteId<span class="token operator">:</span> newSelectedNoteId<span class="token punctuation">,</span></ins><br><ins class="highlight-line highlight-line-add">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></ins><br><ins class="highlight-line highlight-line-add">  <span class="token punctuation">}</span><span class="token punctuation">;</span></ins><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">></span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span>Toolbar</span><br><span class="highlight-line">          onNewNote<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleNewNote<span class="token punctuation">}</span></span><br><ins class="highlight-line highlight-line-add">          onDeleteNote<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleDeleteNote<span class="token punctuation">}</span></ins><br><span class="highlight-line">        <span class="token operator">/</span><span class="token operator">></span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span>NoteContainer</span><br><span class="highlight-line">          notes<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>notes<span class="token punctuation">}</span></span><br><span class="highlight-line">          selectedNoteId<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>selectedNoteId<span class="token punctuation">}</span></span><br><span class="highlight-line">          onClickNote<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClickNote<span class="token punctuation">}</span></span><br><span class="highlight-line">          onNoteEditorChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleNoteEditorChange<span class="token punctuation">}</span></span><br><span class="highlight-line">        <span class="token operator">/</span><span class="token operator">></span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span></span></code></pre>
<p>Here the <code>&lt;Toolbar&gt;</code> component is sending the <code>handleDeleteNote</code> method as a prop called <code>onDeleteNote</code>, which we defined earlier to run whenever the “Delete” button in the toolbar is clicked. The <code>handleDeleteNote</code> method has to update the state with a deleted note as well as a new selected note id, which again requires care to avoid mutation. Here we’re creating a new copy of the <code>notes</code> array by using the array <code>filter</code> method. Once the state is updated with <code>setState</code>, React will automatically re-render the child components as needed.</p>
<p>However, there’s a problem — the <code>handleDeleteNote</code> method also needs to select a new note in place of the one that’s deleted. The problem is that selecting a new note means we need to know the top of the list of the transformed (sorted) notes, which we defined in the child <code>&lt;NoteSelectors&gt;</code>component. That seemed like the right decision at the time, but now we’ll need to refactor that method to be in the <strong><code>src/helpers.js</code></strong> file as follows:</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">formatTitle</span><span class="token punctuation">(</span><span class="token parameter">body</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">var</span> maxLength <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>body<span class="token punctuation">.</span>length <span class="token operator">></span> maxLength<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> body<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> maxLength <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"..."</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>body<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token string">"New note"</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> body<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">formatTimestamp</span><span class="token punctuation">(</span><span class="token parameter">timestamp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>timestamp<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUTCString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><ins class="highlight-line highlight-line-add"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">transformNotes</span><span class="token punctuation">(</span><span class="token parameter">notes</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></ins><br><ins class="highlight-line highlight-line-add">  <span class="token keyword">return</span> notes<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=></span> </ins><br><ins class="highlight-line highlight-line-add">    b<span class="token punctuation">.</span>timestamp <span class="token operator">-</span> a<span class="token punctuation">.</span>timestamp</ins><br><ins class="highlight-line highlight-line-add">  <span class="token punctuation">)</span><span class="token punctuation">;</span></ins><br><ins class="highlight-line highlight-line-add"><span class="token punctuation">}</span></ins></code></pre>
<p>The <code>&lt;NoteSelectors&gt;</code> component in <strong><code>src/components/NoteSelectors.js</code></strong> can now import the <code>transformNotes</code> helper function as well:</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> NoteSelector <span class="token keyword">from</span> <span class="token string">"./NoteSelector"</span><span class="token punctuation">;</span></span><br><ins class="highlight-line highlight-line-add"><span class="token keyword">import</span> <span class="token punctuation">{</span> transformNotes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../helpers"</span><span class="token punctuation">;</span></ins><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">class</span> <span class="token class-name">NoteSelectors</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><ins class="highlight-line highlight-line-add">    <span class="token keyword">const</span> noteSelectors <span class="token operator">=</span> <span class="token function">transformNotes</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>notes<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">note</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span></ins><br><span class="highlight-line">      <span class="token operator">&lt;</span>NoteSelector</span><br><span class="highlight-line">        key<span class="token operator">=</span><span class="token punctuation">{</span>note<span class="token punctuation">.</span>id<span class="token punctuation">}</span></span><br><span class="highlight-line">        body<span class="token operator">=</span><span class="token punctuation">{</span>note<span class="token punctuation">.</span>body<span class="token punctuation">}</span></span><br><span class="highlight-line">        timestamp<span class="token operator">=</span><span class="token punctuation">{</span>note<span class="token punctuation">.</span>timestamp<span class="token punctuation">}</span></span><br><span class="highlight-line">        id<span class="token operator">=</span><span class="token punctuation">{</span>note<span class="token punctuation">.</span>id<span class="token punctuation">}</span></span><br><span class="highlight-line">        selectedNoteId<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>selectedNoteId<span class="token punctuation">}</span></span><br><span class="highlight-line">        onClickNote<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>onClickNote<span class="token punctuation">}</span></span><br><span class="highlight-line">      <span class="token operator">/</span><span class="token operator">></span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"note-selectors"</span><span class="token operator">></span><span class="token punctuation">{</span>noteSelectors<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> NoteSelectors<span class="token punctuation">;</span></span></code></pre>
<p>The last detail is to change the <code>&lt;NoteEditor&gt;</code> component to only render if there is a <code>selectedNote</code>, since it’s now possible to delete all the notes. The template in <strong><code>src/components/NoteEditor.js</code></strong> would change as follows:</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span>formatTimestamp<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../helpers'</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">class</span> <span class="token class-name">NoteEditor</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token function-variable function">handleChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">onNoteEditorChange</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><ins class="highlight-line highlight-line-add">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>selectedNote<span class="token punctuation">)</span> <span class="token punctuation">{</span></ins><br><span class="highlight-line">      <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"note-editor"</span><span class="token operator">></span></span><br><span class="highlight-line">          <span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token string">"note-editor-info"</span><span class="token operator">></span></span><br><span class="highlight-line">            <span class="token punctuation">{</span><span class="token function">formatTimestamp</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>selectedNote<span class="token punctuation">.</span>timestamp<span class="token punctuation">)</span><span class="token punctuation">}</span></span><br><span class="highlight-line">          <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></span><br><span class="highlight-line">          <span class="token operator">&lt;</span>textarea className<span class="token operator">=</span><span class="token string">"note-editor-input"</span></span><br><span class="highlight-line">            value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>selectedNote<span class="token punctuation">.</span>body<span class="token punctuation">}</span></span><br><span class="highlight-line">            onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span></span><br><span class="highlight-line">          <span class="token operator">/</span><span class="token operator">></span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></span><br><span class="highlight-line">      <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><ins class="highlight-line highlight-line-add">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></ins><br><ins class="highlight-line highlight-line-add">      <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></ins><br><ins class="highlight-line highlight-line-add">    <span class="token punctuation">}</span></ins><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> NoteEditor<span class="token punctuation">;</span></span></code></pre>
<p>Again, no special React syntax, just a regular JavaScript if condition on the <code>render</code> method (returning <code>null</code> to skip rendering the component).</p>
<h3 id="filter-notes-on-search-input">Filter notes on search input <a class="direct-link" href="#filter-notes-on-search-input">#</a></h3>
<p>The final feature is to be able to search notes immediately as you type in the search input. Let’s again start with the child <code>&lt;Toolbar&gt;</code> component in <strong><code>src/components/Toolbar.js</code></strong>:</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">class</span> <span class="token class-name">Toolbar</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span><br><ins class="highlight-line highlight-line-add">  <span class="token function-variable function">handleInput</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></ins><br><ins class="highlight-line highlight-line-add">    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">onSearchNote</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span></ins><br><ins class="highlight-line highlight-line-add">  <span class="token punctuation">}</span></ins><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"toolbar"</span><span class="token operator">></span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span>button className<span class="token operator">=</span><span class="token string">"toolbar-button"</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>onNewNote<span class="token punctuation">}</span><span class="token operator">></span></span><br><span class="highlight-line">          New</span><br><span class="highlight-line">        <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span>button className<span class="token operator">=</span><span class="token string">"toolbar-button"</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>onDeleteNote<span class="token punctuation">}</span><span class="token operator">></span></span><br><span class="highlight-line">          Delete</span><br><span class="highlight-line">        <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span>input className<span class="token operator">=</span><span class="token string">"toolbar-search"</span> type<span class="token operator">=</span><span class="token string">"text"</span> placeholder<span class="token operator">=</span><span class="token string">"Search..."</span> </span><br><ins class="highlight-line highlight-line-add">          onInput<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleInput<span class="token punctuation">}</span></ins><br><span class="highlight-line">        <span class="token operator">/</span><span class="token operator">></span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> Toolbar<span class="token punctuation">;</span></span></code></pre>
<p>Here the code <code>onInput={this.handleInput}</code> is capturing the native DOM <code>&lt;input&gt;</code> input event and running the <code>handleInput</code> method. The handleInput method simply calls up the <code>onSearchNote</code> method from the props, giving it the value of the user’s text. This means the parent <code>&lt;App&gt;</code> component must send down the <code>props</code> appropriately, which would change the code in <strong><code>src/App.js</code></strong> as follows:</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> Toolbar <span class="token keyword">from</span> <span class="token string">'./components/Toolbar'</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> NoteContainer <span class="token keyword">from</span> <span class="token string">'./components/NoteContainer'</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span>transformNotes<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./helpers'</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token string">'./App.css'</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      notes<span class="token operator">:</span> <span class="token punctuation">[</span></span><br><span class="highlight-line">        <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> body<span class="token operator">:</span> <span class="token string">"This is a first test"</span><span class="token punctuation">,</span> timestamp<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> body<span class="token operator">:</span> <span class="token string">"This is a second test"</span><span class="token punctuation">,</span> timestamp<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> body<span class="token operator">:</span> <span class="token string">"This is a third test"</span><span class="token punctuation">,</span> timestamp<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><br><span class="highlight-line">      <span class="token punctuation">]</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      selectedNoteId<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span><br><ins class="highlight-line highlight-line-add">      searchText<span class="token operator">:</span> <span class="token string">""</span></ins><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function-variable function">handleClickNote</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>selectedNoteId<span class="token operator">:</span> id<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function-variable function">handleNoteEditorChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> newNotes <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>notes<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">note</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>note<span class="token punctuation">.</span>id <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>selectedNoteId<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          id<span class="token operator">:</span> note<span class="token punctuation">.</span>id<span class="token punctuation">,</span></span><br><span class="highlight-line">          body<span class="token operator">:</span> text<span class="token punctuation">,</span></span><br><span class="highlight-line">          timestamp<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> note<span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>notes<span class="token operator">:</span> newNotes<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function-variable function">handleNewNote</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> newNote <span class="token operator">=</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      id<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      body<span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      timestamp<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">      notes<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>notes<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span>newNote<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      selectedNoteId<span class="token operator">:</span> newNote<span class="token punctuation">.</span>id</span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function-variable function">handleDeleteNote</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> newNotes <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>notes<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">note</span> <span class="token operator">=></span></span><br><span class="highlight-line">      note<span class="token punctuation">.</span>id <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>selectedNoteId</span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><ins class="highlight-line highlight-line-add">    <span class="token keyword">const</span> transformedNotes <span class="token operator">=</span> <span class="token function">transformNotes</span><span class="token punctuation">(</span>newNotes<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>searchText<span class="token punctuation">)</span><span class="token punctuation">;</span></ins><br><span class="highlight-line">    <span class="token keyword">const</span> newSelectedNoteId <span class="token operator">=</span> transformedNotes<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">?</span> transformedNotes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>id <span class="token operator">:</span> <span class="token keyword">null</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">      notes<span class="token operator">:</span> newNotes<span class="token punctuation">,</span></span><br><span class="highlight-line">      selectedNoteId<span class="token operator">:</span> newSelectedNoteId</span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><ins class="highlight-line highlight-line-add">  <span class="token function-variable function">handleSearchNote</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">newSearchText</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></ins><br><ins class="highlight-line highlight-line-add">    <span class="token keyword">const</span> transformedNotes <span class="token operator">=</span> <span class="token function">transformNotes</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>notes<span class="token punctuation">,</span> newSearchText<span class="token punctuation">)</span><span class="token punctuation">;</span></ins><br><ins class="highlight-line highlight-line-add">    <span class="token keyword">let</span> newSelectedNoteId <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></ins><br><ins class="highlight-line highlight-line-add">    <span class="token keyword">if</span> <span class="token punctuation">(</span>transformedNotes<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></ins><br><ins class="highlight-line highlight-line-add">      <span class="token keyword">const</span> selectedNote <span class="token operator">=</span> transformedNotes<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">note</span> <span class="token operator">=></span> note<span class="token punctuation">.</span>id <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>selectedNoteId<span class="token punctuation">)</span><span class="token punctuation">;</span></ins><br><ins class="highlight-line highlight-line-add">      <span class="token keyword">if</span> <span class="token punctuation">(</span>selectedNote<span class="token punctuation">)</span> <span class="token punctuation">{</span></ins><br><ins class="highlight-line highlight-line-add">        newSelectedNoteId <span class="token operator">=</span> selectedNote<span class="token punctuation">.</span>id<span class="token punctuation">;</span></ins><br><ins class="highlight-line highlight-line-add">      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></ins><br><ins class="highlight-line highlight-line-add">        newSelectedNoteId <span class="token operator">=</span> transformedNotes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>id<span class="token punctuation">;</span></ins><br><ins class="highlight-line highlight-line-add">      <span class="token punctuation">}</span></ins><br><ins class="highlight-line highlight-line-add">    <span class="token punctuation">}</span></ins><br><ins class="highlight-line highlight-line-add">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span></ins><br><ins class="highlight-line highlight-line-add">      searchText<span class="token operator">:</span> newSearchText<span class="token punctuation">,</span></ins><br><ins class="highlight-line highlight-line-add">      selectedNoteId<span class="token operator">:</span> newSelectedNoteId</ins><br><ins class="highlight-line highlight-line-add">    <span class="token punctuation">}</span><span class="token punctuation">)</span></ins><br><ins class="highlight-line highlight-line-add">  <span class="token punctuation">}</span></ins><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">></span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span>Toolbar</span><br><span class="highlight-line">          onNewNote<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleNewNote<span class="token punctuation">}</span></span><br><span class="highlight-line">          onDeleteNote<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleDeleteNote<span class="token punctuation">}</span></span><br><ins class="highlight-line highlight-line-add">          onSearchNote<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleSearchNote<span class="token punctuation">}</span></ins><br><span class="highlight-line">        <span class="token operator">/</span><span class="token operator">></span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span>NoteContainer</span><br><span class="highlight-line">          notes<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>notes<span class="token punctuation">}</span></span><br><span class="highlight-line">          selectedNoteId<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>selectedNoteId<span class="token punctuation">}</span></span><br><ins class="highlight-line highlight-line-add">          searchText<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>searchText<span class="token punctuation">}</span></ins><br><span class="highlight-line">          onClickNote<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClickNote<span class="token punctuation">}</span></span><br><span class="highlight-line">          onNoteEditorChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleNoteEditorChange<span class="token punctuation">}</span></span><br><span class="highlight-line">        <span class="token operator">/</span><span class="token operator">></span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>      </span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span></span></code></pre>
<p>Let’s go through these changes one at a time:</p>
<ul>
<li>We are keeping track of a new piece of state, <code>searchText</code> — the search text the user enters. This will be used to filter the list of notes.</li>
<li>The <code>transformNotes</code> helper method now takes in two arguments — the array of <code>notes</code> as well as the <code>searchText</code>. The transformation will now consist of both filtering and sorting (see below).</li>
<li>The <code>handleSearchNote</code> method updates the <code>searchText</code> data to the input argument, which automatically triggers React to re-render all the child components. It also has to update the <code>selectedNoteId</code> to be the first of the <code>transformedNotes</code> if possible.</li>
<li>The <code>&lt;Toolbar&gt;</code> component now takes in a new prop <code>onSearchNote={this.handleSearchNote}</code> so it can call up the <code>handleSearchNote</code> function whenever the search input text changes.</li>
<li>The <code>&lt;NoteContainer&gt;</code> component now takes in a new prop <code>searchText={this.state.searchText}</code>, which the children components will need to properly filter the notes as well.</li>
</ul>
<p>The <code>transformNotes</code> helper function in <strong><code>src/helpers.js</code></strong> now looks like:</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">formatTitle</span><span class="token punctuation">(</span><span class="token parameter">body</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">var</span> maxLength <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>body<span class="token punctuation">.</span>length <span class="token operator">></span> maxLength<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> body<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> maxLength <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"..."</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>body<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token string">"New note"</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> body<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">formatTimestamp</span><span class="token punctuation">(</span><span class="token parameter">timestamp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>timestamp<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUTCString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><ins class="highlight-line highlight-line-add"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">transformNotes</span><span class="token punctuation">(</span><span class="token parameter">notes<span class="token punctuation">,</span> searchText</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></ins><br><ins class="highlight-line highlight-line-add">  <span class="token keyword">return</span> notes</ins><br><ins class="highlight-line highlight-line-add">    <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">note</span><span class="token punctuation">)</span> <span class="token operator">=></span> note<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>searchText<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span></ins><br><ins class="highlight-line highlight-line-add">    <span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=></span> b<span class="token punctuation">.</span>timestamp <span class="token operator">-</span> a<span class="token punctuation">.</span>timestamp<span class="token punctuation">)</span><span class="token punctuation">;</span></ins><br><ins class="highlight-line highlight-line-add"><span class="token punctuation">}</span></ins></code></pre>
<p>The <code>&lt;NoteContainer&gt;</code> component changes slightly to continue to pass along the <code>searchText</code> <code>prop</code>, which you can see in <strong><code>src/components/NoteContainer.js</code></strong>:</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> NoteSelectors <span class="token keyword">from</span> <span class="token string">'./NoteSelectors'</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> NoteEditor <span class="token keyword">from</span> <span class="token string">'./NoteEditor'</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">class</span> <span class="token class-name">NoteContainer</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> selectedNote <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>notes<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">note</span> <span class="token operator">=></span> note<span class="token punctuation">.</span>id <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>selectedNoteId<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"note-container"</span><span class="token operator">></span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span>NoteSelectors</span><br><span class="highlight-line">          notes<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>notes<span class="token punctuation">}</span></span><br><span class="highlight-line">          selectedNoteId<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>selectedNoteId<span class="token punctuation">}</span></span><br><ins class="highlight-line highlight-line-add">          searchText<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>searchText<span class="token punctuation">}</span></ins><br><span class="highlight-line">          onClickNote<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>onClickNote<span class="token punctuation">}</span></span><br><span class="highlight-line">        <span class="token operator">/</span><span class="token operator">></span></span><br><span class="highlight-line">        <span class="token operator">&lt;</span>NoteEditor</span><br><span class="highlight-line">          selectedNote<span class="token operator">=</span><span class="token punctuation">{</span>selectedNote<span class="token punctuation">}</span></span><br><span class="highlight-line">          onNoteEditorChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>onNoteEditorChange<span class="token punctuation">}</span></span><br><span class="highlight-line">        <span class="token operator">/</span><span class="token operator">></span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> NoteContainer<span class="token punctuation">;</span></span></code></pre>
<p>Finally, the <code>&lt;NoteSelectors&gt;</code> component uses the <code>searchText</code> prop to filter the notes using the <code>transformNotes</code> helper function, which you can see in <strong><code>src/components/NoteSelectors.js</code></strong>:</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> NoteSelector <span class="token keyword">from</span> <span class="token string">'./NoteSelector'</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span>transformNotes<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../helpers'</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">class</span> <span class="token class-name">NoteSelectors</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><ins class="highlight-line highlight-line-add">    <span class="token keyword">const</span> transformedNotes <span class="token operator">=</span> <span class="token function">transformNotes</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>notes<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>searchText<span class="token punctuation">)</span><span class="token punctuation">;</span></ins><br><ins class="highlight-line highlight-line-add">    <span class="token keyword">const</span> noteSelectors <span class="token operator">=</span> transformedNotes<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">note</span> <span class="token operator">=></span></ins><br><span class="highlight-line">      <span class="token operator">&lt;</span>NoteSelector</span><br><span class="highlight-line">        key<span class="token operator">=</span><span class="token punctuation">{</span>note<span class="token punctuation">.</span>id<span class="token punctuation">}</span></span><br><span class="highlight-line">        body<span class="token operator">=</span><span class="token punctuation">{</span>note<span class="token punctuation">.</span>body<span class="token punctuation">}</span></span><br><span class="highlight-line">        timestamp<span class="token operator">=</span><span class="token punctuation">{</span>note<span class="token punctuation">.</span>timestamp<span class="token punctuation">}</span></span><br><span class="highlight-line">        id<span class="token operator">=</span><span class="token punctuation">{</span>note<span class="token punctuation">.</span>id<span class="token punctuation">}</span></span><br><span class="highlight-line">        selectedNoteId<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>selectedNoteId<span class="token punctuation">}</span></span><br><span class="highlight-line">        onClickNote<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>onClickNote<span class="token punctuation">}</span></span><br><span class="highlight-line">      <span class="token operator">/</span><span class="token operator">></span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"note-selectors"</span><span class="token operator">></span></span><br><span class="highlight-line">        <span class="token punctuation">{</span>noteSelectors<span class="token punctuation">}</span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></span><br><span class="highlight-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> NoteSelectors<span class="token punctuation">;</span></span></code></pre>
<p>You can see the final version of the code in all its glory at this <a href="https://github.com/peterxjang/notes-app-react/tree/94f2d8a105c0e224490325a4bac1b1d2266961a1">GitHub repository</a>.</p>
<h3 id="conclusion">Conclusion <a class="direct-link" href="#conclusion">#</a></h3>
<p>In many ways, working with React components is quite similar to working with <a href="comparing-frontend-approaches-part-4-vuejs-with-components.html">Vue.js components</a> (Vue.js was definitely heavily inspired by both Angular 1 and React). There’s definitely something nice about React providing a small API surface, without a lot of specialized approaches — it forces you to get better at your raw JavaScript skills. You need a loop to generate HTML from a list? Use the JavaScript array <code>map</code> method. You need conditional rendering? Use a regular JavaScript if condition. You want helper functions? Make functions in a file and <code>import</code> them. Pretty cool stuff.</p>
<p>However, at the same time React leans so heavily on new JavaScript features that it can definitely feel daunting to learn up front. And despite not having to learn React-specific syntax, you do need to accustom yourself to quite a bit of React specific idioms (naming event handlers, properly binding <code>this</code> without triggering extra re-rendering, avoiding mutation, etc.). Also, React can sometimes be unopinionated to the point where it creates confusion — there’s many different ways to define a component (the class keyword, pure functions, etc.), and quite a bit of debate on what’s the “best” way to do it.</p>
<p>React at the time of this writing is a pretty interesting blend of (what at least looks like) object oriented approaches and functional approaches. It’s definitely interesting to contrast with Vue.js, which encourages mutation of data as a key way of providing reactivity. React prefers an immutable approach to state, which can be at times tricky to achieve with JavaScript as a language. In the <a href="comparing-frontend-approaches-part-6-elm.html">next part</a> of this series, we’ll be looking at <a href="http://elm-lang.org/">Elm</a>, which is an actual pure functional language with immutable data structures that compiles to JavaScript. Stay tuned!</p>


<hr>
<ul class="post-navigation"><li>Next: <a href="/blog/comparing-frontend-approaches-part-6-elm.html">Comparing Frontend Approaches Part 6: Elm</a></li><li>Previous: <a href="/blog/comparing-frontend-approaches-part-4-vuejs-with-components.html">Comparing Frontend Approaches Part 4: Vue.js with Components</a></li>
  <li>Back to <a href="/blog/">all posts</a></li>
</ul>

    </main>

    <footer>
      <div>
        <img class="avatar" src="/img/avatar_square.jpg" alt="Profile picture of Peter Jang">
        <h4>Peter Jang</h4>
        <p>Hi! My name is Peter Jang, I'm an educator and software developer by trade (karaoke beast by hobby). I'm currently working as the Dean of Instruction at <a target="_blank" rel="noopener noreferrer me" href="https://actualize.co">Actualize</a>, where I design the web development curriculum and teach live classes at our Chicago main campus. This is my personal website where I write about programming and other technology-related topics.</p>
        <p>Follow me @peterxjang: <a target="_blank" rel="noopener noreferrer me" href="https://twitter.com/peterxjang">twitter</a>, <a target="_blank" rel="noopener noreferrer me" href="https://github.com/peterxjang">github</a>, <a target="_blank" rel="noopener noreferrer me" href="https://linkedin.com/in/peterxjang">linkedin</a></p>
        <p>Subscribe to my blog: <a href="/feed/feed.xml">rss</a></p>
      </div>
    </footer>

    <!-- Current page: /blog/comparing-frontend-approaches-part-5-react.html -->
  </body>
</html>
